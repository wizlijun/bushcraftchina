/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2023 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=e.pdfjsWorker=t():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf.worker",[],(()=>e.pdfjsWorker=t())):"object"==typeof exports?exports["pdfjs-dist/build/pdf.worker"]=e.pdfjsWorker=t():e["pdfjs-dist/build/pdf.worker"]=e.pdfjsWorker=t()}(globalThis,(()=>(()=>{"use strict";var e=[,(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerTask=t.WorkerMessageHandler=void 0,a(2),a(84),a(93),a(94),a(97),a(99),a(101),a(105),a(108),a(115),a(116),a(127),a(129),a(132),a(134),a(136),a(138),a(140),a(144);var r=a(145),n=a(150),i=a(151),s=a(153),o=a(157),c=a(219),l=a(224),h=a(258),u=a(259),d=a(223);class WorkerTask{constructor(e){this.name=e,this.terminated=!1,this._capability=new r.PromiseCapability}get finished(){return this._capability.promise}finish(){this._capability.resolve()}terminate(){this.terminated=!0}ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}}t.WorkerTask=WorkerTask;class WorkerMessageHandler{static setup(e,t){let a=!1;e.on("test",(function(t){a||(a=!0,e.send("test",t instanceof Uint8Array))})),e.on("configure",(function(e){(0,r.setVerbosityLevel)(e.verbosity)})),e.on("GetDocRequest",(function(e){return WorkerMessageHandler.createDocumentHandler(e,t)}))}static createDocumentHandler(e,t){let a,f=!1,g=null;const p=new Set,m=(0,r.getVerbosityLevel)(),{docId:b,apiVersion:y}=e,w="3.11.174";if(y!==w)throw new Error(`The API version "${y}" does not match the Worker version "${w}".`);const S=[];for(const e in[])S.push(e);if(S.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+S.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");const x=b+"_worker";let C=new h.MessageHandler(x,b,t);function ensureNotTerminated(){if(f)throw new Error("Worker was terminated")}function startWorkerTask(e){p.add(e)}function finishWorkerTask(e){e.finish(),p.delete(e)}async function loadDocument(e){await a.ensureDoc("checkHeader"),await a.ensureDoc("parseStartXRef"),await a.ensureDoc("parse",[e]),await a.ensureDoc("checkFirstPage",[e]),await a.ensureDoc("checkLastPage",[e]);const t=await a.ensureDoc("isPureXfa");if(t){const e=new WorkerTask("loadXfaFonts");startWorkerTask(e),await Promise.all([a.loadXfaFonts(C,e).catch((e=>{})).then((()=>finishWorkerTask(e))),a.loadXfaImages()])}const[r,n]=await Promise.all([a.ensureDoc("numPages"),a.ensureDoc("fingerprints")]);return{numPages:r,fingerprints:n,htmlForXfa:t?await a.ensureDoc("htmlForXfa"):null}}function getPdfManager(e){let{data:t,password:a,disableAutoFetch:i,rangeChunkSize:o,length:c,docBaseUrl:l,enableXfa:h,evaluatorOptions:d}=e;const f={source:null,disableAutoFetch:i,docBaseUrl:l,docId:b,enableXfa:h,evaluatorOptions:d,handler:C,length:c,password:a,rangeChunkSize:o},p=new r.PromiseCapability;let m;if(t){try{f.source=t,m=new s.LocalPdfManager(f),p.resolve(m)}catch(e){p.reject(e)}return p.promise}let y,w=[];try{y=new u.PDFWorkerStream(C)}catch(e){return p.reject(e),p.promise}const S=y.getFullReader();S.headersReady.then((function(){if(S.isRangeSupported){f.source=y,f.length=S.contentLength,f.disableAutoFetch||=S.isStreamingSupported,m=new s.NetworkPdfManager(f);for(const e of w)m.sendProgressiveData(e);w=[],p.resolve(m),g=null}})).catch((function(e){p.reject(e),g=null}));let x=0;return new Promise((function(e,t){const readChunk=function(e){let{value:a,done:i}=e;try{if(ensureNotTerminated(),i)return m||function(){const e=(0,n.arrayBuffersToBytes)(w);c&&e.length!==c&&(0,r.warn)("reported HTTP length is different from actual");try{f.source=e,m=new s.LocalPdfManager(f),p.resolve(m)}catch(e){p.reject(e)}w=[]}(),void(g=null);x+=a.byteLength,S.isStreamingSupported||C.send("DocProgress",{loaded:x,total:Math.max(x,S.contentLength||0)}),m?m.sendProgressiveData(a):w.push(a),S.read().then(readChunk,t)}catch(e){t(e)}};S.read().then(readChunk,t)})).catch((function(e){p.reject(e),g=null})),g=function(e){y.cancelAllRequests(e)},p.promise}return C.on("GetPage",(function(e){return a.getPage(e.pageIndex).then((function(e){return Promise.all([a.ensure(e,"rotate"),a.ensure(e,"ref"),a.ensure(e,"userUnit"),a.ensure(e,"view")]).then((function(e){let[t,a,r,n]=e;return{rotate:t,ref:a,userUnit:r,view:n}}))}))})),C.on("GetPageIndex",(function(e){const t=i.Ref.get(e.num,e.gen);return a.ensureCatalog("getPageIndex",[t])})),C.on("GetDestinations",(function(e){return a.ensureCatalog("destinations")})),C.on("GetDestination",(function(e){return a.ensureCatalog("getDestination",[e.id])})),C.on("GetPageLabels",(function(e){return a.ensureCatalog("pageLabels")})),C.on("GetPageLayout",(function(e){return a.ensureCatalog("pageLayout")})),C.on("GetPageMode",(function(e){return a.ensureCatalog("pageMode")})),C.on("GetViewerPreferences",(function(e){return a.ensureCatalog("viewerPreferences")})),C.on("GetOpenAction",(function(e){return a.ensureCatalog("openAction")})),C.on("GetAttachments",(function(e){return a.ensureCatalog("attachments")})),C.on("GetDocJSActions",(function(e){return a.ensureCatalog("jsActions")})),C.on("GetPageJSActions",(function(e){let{pageIndex:t}=e;return a.getPage(t).then((function(e){return a.ensure(e,"jsActions")}))})),C.on("GetOutline",(function(e){return a.ensureCatalog("documentOutline")})),C.on("GetOptionalContentConfig",(function(e){return a.ensureCatalog("optionalContentConfig")})),C.on("GetPermissions",(function(e){return a.ensureCatalog("permissions")})),C.on("GetMetadata",(function(e){return Promise.all([a.ensureDoc("documentInfo"),a.ensureCatalog("metadata")])})),C.on("GetMarkInfo",(function(e){return a.ensureCatalog("markInfo")})),C.on("GetData",(function(e){return a.requestLoadedStream().then((function(e){return e.bytes}))})),C.on("GetAnnotations",(function(e){let{pageIndex:t,intent:r}=e;return a.getPage(t).then((function(e){const a=new WorkerTask(`GetAnnotations: page ${t}`);return startWorkerTask(a),e.getAnnotationsData(C,a,r).then((e=>(finishWorkerTask(a),e)),(e=>{throw finishWorkerTask(a),e}))}))})),C.on("GetFieldObjects",(function(e){return a.ensureDoc("fieldObjects")})),C.on("HasJSActions",(function(e){return a.ensureDoc("hasJSActions")})),C.on("GetCalculationOrderIds",(function(e){return a.ensureDoc("calculationOrderIds")})),C.on("SaveDocument",(async function(e){let{isPureXfa:t,numPages:s,annotationStorage:c,filename:h}=e;const u=[a.requestLoadedStream(),a.ensureCatalog("acroForm"),a.ensureCatalog("acroFormRef"),a.ensureDoc("startXRef"),a.ensureDoc("xref"),a.ensureDoc("linearization"),a.ensureCatalog("structTreeRoot")],f=[],g=t?null:(0,n.getNewAnnotationsMap)(c),[p,m,b,y,w,S,x]=await Promise.all(u),v=w.trailer.getRaw("Root")||null;let k;if(g){x?await x.canUpdateStructTree({pdfManager:a,newAnnotationsByPage:g})&&(k=x):await d.StructTreeRoot.canCreateStructureTree({catalogRef:v,pdfManager:a,newAnnotationsByPage:g})&&(k=null);const e=o.AnnotationFactory.generateImages(c.values(),w,a.evaluatorOptions.isOffscreenCanvasSupported),t=void 0===k?f:[];for(const[r,n]of g)t.push(a.getPage(r).then((t=>{const a=new WorkerTask(`Save (editor): page ${r}`);return t.saveNewAnnotations(C,a,n,e).finally((function(){finishWorkerTask(a)}))})));null===k?f.push(Promise.all(t).then((async e=>(await d.StructTreeRoot.createStructureTree({newAnnotationsByPage:g,xref:w,catalogRef:v,pdfManager:a,newRefs:e}),e)))):k&&f.push(Promise.all(t).then((async e=>(await k.updateStructureTree({newAnnotationsByPage:g,pdfManager:a,newRefs:e}),e))))}if(t)f.push(a.serializeXfaData(c));else for(let e=0;e<s;e++)f.push(a.getPage(e).then((function(t){const a=new WorkerTask(`Save: page ${e}`);return t.save(C,a,c).finally((function(){finishWorkerTask(a)}))})));const O=await Promise.all(f);let T=[],M=null;if(t){if(M=O[0],!M)return p.bytes}else if(T=O.flat(2),0===T.length)return p.bytes;const E=b&&m instanceof i.Dict&&T.some((e=>e.needAppearances)),D=m instanceof i.Dict&&m.get("XFA")||null;let R=null,N=!1;if(Array.isArray(D)){for(let e=0,t=D.length;e<t;e+=2)"datasets"===D[e]&&(R=D[e+1],N=!0);null===R&&(R=w.getNewTemporaryRef())}else D&&(0,r.warn)("Unsupported XFA type.");let L=Object.create(null);if(w.trailer){const e=Object.create(null),t=w.trailer.get("Info")||null;t instanceof i.Dict&&t.forEach(((t,a)=>{"string"==typeof a&&(e[t]=(0,r.stringToPDFString)(a))})),L={rootRef:v,encryptRef:w.trailer.getRaw("Encrypt")||null,newRef:w.getNewTemporaryRef(),infoRef:w.trailer.getRaw("Info")||null,info:e,fileIds:w.trailer.get("ID")||null,startXRef:S?y:w.lastXRefStreamPos??y,filename:h}}return(0,l.incrementalUpdate)({originalData:p.bytes,xrefInfo:L,newRefs:T,xref:w,hasXfa:!!D,xfaDatasetsRef:R,hasXfaDatasetsEntry:N,needAppearances:E,acroFormRef:b,acroForm:m,xfaData:M}).finally((()=>{w.resetNewTemporaryRef()}))})),C.on("GetOperatorList",(function(e,t){const n=e.pageIndex;a.getPage(n).then((function(a){const i=new WorkerTask(`GetOperatorList: page ${n}`);startWorkerTask(i);const s=m>=r.VerbosityLevel.INFOS?Date.now():0;a.getOperatorList({handler:C,sink:t,task:i,intent:e.intent,cacheKey:e.cacheKey,annotationStorage:e.annotationStorage}).then((function(e){finishWorkerTask(i),s&&(0,r.info)(`page=${n+1} - getOperatorList: time=${Date.now()-s}ms, len=${e.length}`),t.close()}),(function(e){finishWorkerTask(i),i.terminated||t.error(e)}))}))})),C.on("GetTextContent",(function(e,t){const{pageIndex:n,includeMarkedContent:i,disableNormalization:s}=e;a.getPage(n).then((function(e){const a=new WorkerTask("GetTextContent: page "+n);startWorkerTask(a);const o=m>=r.VerbosityLevel.INFOS?Date.now():0;e.extractTextContent({handler:C,task:a,sink:t,includeMarkedContent:i,disableNormalization:s}).then((function(){finishWorkerTask(a),o&&(0,r.info)(`page=${n+1} - getTextContent: time=`+(Date.now()-o)+"ms"),t.close()}),(function(e){finishWorkerTask(a),a.terminated||t.error(e)}))}))})),C.on("GetStructTree",(function(e){return a.getPage(e.pageIndex).then((function(e){return a.ensure(e,"getStructTree")}))})),C.on("FontFallback",(function(e){return a.fontFallback(e.id,C)})),C.on("Cleanup",(function(e){return a.cleanup(!0)})),C.on("Terminate",(function(e){f=!0;const t=[];if(a){a.terminate(new r.AbortException("Worker was terminated."));const e=a.cleanup();t.push(e),a=null}else(0,c.clearGlobalCaches)();g&&g(new r.AbortException("Worker was terminated."));for(const e of p)t.push(e.finished),e.terminate();return Promise.all(t).then((function(){C.destroy(),C=null}))})),C.on("Ready",(function(t){!function setupDoc(e){function onSuccess(e){ensureNotTerminated(),C.send("GetDoc",{pdfInfo:e})}function onFailure(e){if(ensureNotTerminated(),e instanceof r.PasswordException){const t=new WorkerTask(`PasswordException: response ${e.code}`);startWorkerTask(t),C.sendWithPromise("PasswordRequest",e).then((function(e){let{password:r}=e;finishWorkerTask(t),a.updatePassword(r),pdfManagerReady()})).catch((function(){finishWorkerTask(t),C.send("DocException",e)}))}else e instanceof r.InvalidPDFException||e instanceof r.MissingPDFException||e instanceof r.UnexpectedResponseException||e instanceof r.UnknownErrorException?C.send("DocException",e):C.send("DocException",new r.UnknownErrorException(e.message,e.toString()))}function pdfManagerReady(){ensureNotTerminated(),loadDocument(!1).then(onSuccess,(function(e){ensureNotTerminated(),e instanceof n.XRefParseException?a.requestLoadedStream().then((function(){ensureNotTerminated(),loadDocument(!0).then(onSuccess,onFailure)})):onFailure(e)}))}ensureNotTerminated(),getPdfManager(e).then((function(e){if(f)throw e.terminate(new r.AbortException("Worker was terminated.")),new Error("Worker was terminated");a=e,a.requestLoadedStream(!0).then((e=>{C.send("DataLoaded",{length:e.bytes.byteLength})}))})).then(pdfManagerReady,onFailure)}(e),e=null})),x}static initializeFromPort(e){const t=new h.MessageHandler("worker","main",e);WorkerMessageHandler.setup(t,e),t.send("ready",null)}}t.WorkerMessageHandler=WorkerMessageHandler,"undefined"==typeof window&&!r.isNodeJS&&"undefined"!=typeof self&&function isMessagePort(e){return"function"==typeof e.postMessage&&"onmessage"in e}(self)&&WorkerMessageHandler.initializeFromPort(self)},(e,t,a)=>{var r=a(3),n=a(4),i=a(69),s=a(70),o="WebAssembly",c=n[o],l=7!==Error("e",{cause:7}).cause,exportGlobalErrorCauseWrapper=function(e,t){var a={};a[e]=s(e,t,l),r({global:!0,constructor:!0,arity:1,forced:l},a)},exportWebAssemblyErrorCauseWrapper=function(e,t){if(c&&c[e]){var a={};a[e]=s(o+"."+e,t,l),r({target:o,stat:!0,constructor:!0,arity:1,forced:l},a)}};exportGlobalErrorCauseWrapper("Error",(function(e){return function Error(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("EvalError",(function(e){return function EvalError(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("RangeError",(function(e){return function RangeError(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("ReferenceError",(function(e){return function ReferenceError(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("SyntaxError",(function(e){return function SyntaxError(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("TypeError",(function(e){return function TypeError(t){return i(e,this,arguments)}})),exportGlobalErrorCauseWrapper("URIError",(function(e){return function URIError(t){return i(e,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("CompileError",(function(e){return function CompileError(t){return i(e,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("LinkError",(function(e){return function LinkError(t){return i(e,this,arguments)}})),exportWebAssemblyErrorCauseWrapper("RuntimeError",(function(e){return function RuntimeError(t){return i(e,this,arguments)}}))},(e,t,a)=>{var r=a(4),n=a(5).f,i=a(44),s=a(48),o=a(38),c=a(56),l=a(68);e.exports=function(e,t){var a,h,u,d,f,g=e.target,p=e.global,m=e.stat;if(a=p?r:m?r[g]||o(g,{}):(r[g]||{}).prototype)for(h in t){if(d=t[h],u=e.dontCallGetSet?(f=n(a,h))&&f.value:a[h],!l(p?h:g+(m?".":"#")+h,e.forced)&&void 0!==u){if(typeof d==typeof u)continue;c(d,u)}(e.sham||u&&u.sham)&&i(d,"sham",!0),s(a,h,d,e)}}},function(e){var check=function(e){return e&&e.Math===Math&&e};e.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||function(){return this}()||this||Function("return this")()},(e,t,a)=>{var r=a(6),n=a(8),i=a(10),s=a(11),o=a(12),c=a(18),l=a(39),h=a(42),u=Object.getOwnPropertyDescriptor;t.f=r?u:function getOwnPropertyDescriptor(e,t){if(e=o(e),t=c(t),h)try{return u(e,t)}catch(e){}if(l(e,t))return s(!n(i.f,e,t),e[t])}},(e,t,a)=>{var r=a(7);e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},(e,t,a)=>{var r=a(9),n=Function.prototype.call;e.exports=r?n.bind(n):function(){return n.apply(n,arguments)}},(e,t,a)=>{var r=a(7);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},(e,t)=>{var a={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,n=r&&!a.call({1:2},1);t.f=n?function propertyIsEnumerable(e){var t=r(this,e);return!!t&&t.enumerable}:a},e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},(e,t,a)=>{var r=a(13),n=a(16);e.exports=function(e){return r(n(e))}},(e,t,a)=>{var r=a(14),n=a(7),i=a(15),s=Object,o=r("".split);e.exports=n((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===i(e)?o(e,""):s(e)}:s},(e,t,a)=>{var r=a(9),n=Function.prototype,i=n.call,s=r&&n.bind.bind(i,i);e.exports=r?s:function(e){return function(){return i.apply(e,arguments)}}},(e,t,a)=>{var r=a(14),n=r({}.toString),i=r("".slice);e.exports=function(e){return i(n(e),8,-1)}},(e,t,a)=>{var r=a(17),n=TypeError;e.exports=function(e){if(r(e))throw n("Can't call method on "+e);return e}},e=>{e.exports=function(e){return null==e}},(e,t,a)=>{var r=a(19),n=a(23);e.exports=function(e){var t=r(e,"string");return n(t)?t:t+""}},(e,t,a)=>{var r=a(8),n=a(20),i=a(23),s=a(30),o=a(33),c=a(34),l=TypeError,h=c("toPrimitive");e.exports=function(e,t){if(!n(e)||i(e))return e;var a,c=s(e,h);if(c){if(void 0===t&&(t="default"),a=r(c,e,t),!n(a)||i(a))return a;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},(e,t,a)=>{var r=a(21),n=a(22),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===i}:function(e){return"object"==typeof e?null!==e:r(e)}},(e,t,a)=>{var r=a(22),n=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===n}:function(e){return"function"==typeof e}},e=>{var t="object"==typeof document&&document.all,a=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:a}},(e,t,a)=>{var r=a(24),n=a(21),i=a(25),s=a(26),o=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return n(t)&&i(t.prototype,o(e))}},(e,t,a)=>{var r=a(4),n=a(21);e.exports=function(e,t){return arguments.length<2?(a=r[e],n(a)?a:void 0):r[e]&&r[e][t];var a}},(e,t,a)=>{var r=a(14);e.exports=r({}.isPrototypeOf)},(e,t,a)=>{var r=a(27);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(e,t,a)=>{var r=a(28),n=a(7),i=a(4).String;e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},(e,t,a)=>{var r,n,i=a(4),s=a(29),o=i.process,c=i.Deno,l=o&&o.versions||c&&c.version,h=l&&l.v8;h&&(n=(r=h.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!n&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(n=+r[1]),e.exports=n},e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},(e,t,a)=>{var r=a(31),n=a(17);e.exports=function(e,t){var a=e[t];return n(a)?void 0:r(a)}},(e,t,a)=>{var r=a(21),n=a(32),i=TypeError;e.exports=function(e){if(r(e))return e;throw i(n(e)+" is not a function")}},e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},(e,t,a)=>{var r=a(8),n=a(21),i=a(20),s=TypeError;e.exports=function(e,t){var a,o;if("string"===t&&n(a=e.toString)&&!i(o=r(a,e)))return o;if(n(a=e.valueOf)&&!i(o=r(a,e)))return o;if("string"!==t&&n(a=e.toString)&&!i(o=r(a,e)))return o;throw s("Can't convert object to primitive value")}},(e,t,a)=>{var r=a(4),n=a(35),i=a(39),s=a(41),o=a(27),c=a(26),l=r.Symbol,h=n("wks"),u=c?l.for||l:l&&l.withoutSetter||s;e.exports=function(e){return i(h,e)||(h[e]=o&&i(l,e)?l[e]:u("Symbol."+e)),h[e]}},(e,t,a)=>{var r=a(36),n=a(37);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.32.2",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE",source:"https://github.com/zloirock/core-js"})},e=>{e.exports=!1},(e,t,a)=>{var r=a(4),n=a(38),i="__core-js_shared__",s=r[i]||n(i,{});e.exports=s},(e,t,a)=>{var r=a(4),n=Object.defineProperty;e.exports=function(e,t){try{n(r,e,{value:t,configurable:!0,writable:!0})}catch(a){r[e]=t}return t}},(e,t,a)=>{var r=a(14),n=a(40),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function hasOwn(e,t){return i(n(e),t)}},(e,t,a)=>{var r=a(16),n=Object;e.exports=function(e){return n(r(e))}},(e,t,a)=>{var r=a(14),n=0,i=Math.random(),s=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++n+i,36)}},(e,t,a)=>{var r=a(6),n=a(7),i=a(43);e.exports=!r&&!n((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},(e,t,a)=>{var r=a(4),n=a(20),i=r.document,s=n(i)&&n(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},(e,t,a)=>{var r=a(6),n=a(45),i=a(11);e.exports=r?function(e,t,a){return n.f(e,t,i(1,a))}:function(e,t,a){return e[t]=a,e}},(e,t,a)=>{var r=a(6),n=a(42),i=a(46),s=a(47),o=a(18),c=TypeError,l=Object.defineProperty,h=Object.getOwnPropertyDescriptor,u="enumerable",d="configurable",f="writable";t.f=r?i?function defineProperty(e,t,a){if(s(e),t=o(t),s(a),"function"==typeof e&&"prototype"===t&&"value"in a&&f in a&&!a[f]){var r=h(e,t);r&&r[f]&&(e[t]=a.value,a={configurable:d in a?a[d]:r[d],enumerable:u in a?a[u]:r[u],writable:!1})}return l(e,t,a)}:l:function defineProperty(e,t,a){if(s(e),t=o(t),s(a),n)try{return l(e,t,a)}catch(e){}if("get"in a||"set"in a)throw c("Accessors not supported");return"value"in a&&(e[t]=a.value),e}},(e,t,a)=>{var r=a(6),n=a(7);e.exports=r&&n((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},(e,t,a)=>{var r=a(20),n=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw i(n(e)+" is not an object")}},(e,t,a)=>{var r=a(21),n=a(45),i=a(49),s=a(38);e.exports=function(e,t,a,o){o||(o={});var c=o.enumerable,l=void 0!==o.name?o.name:t;if(r(a)&&i(a,l,o),o.global)c?e[t]=a:s(t,a);else{try{o.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=a:n.f(e,t,{value:a,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}},(e,t,a)=>{var r=a(14),n=a(7),i=a(21),s=a(39),o=a(6),c=a(50).CONFIGURABLE,l=a(51),h=a(52),u=h.enforce,d=h.get,f=String,g=Object.defineProperty,p=r("".slice),m=r("".replace),b=r([].join),y=o&&!n((function(){return 8!==g((function(){}),"length",{value:8}).length})),w=String(String).split("String"),S=e.exports=function(e,t,a){"Symbol("===p(f(t),0,7)&&(t="["+m(f(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),a&&a.getter&&(t="get "+t),a&&a.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(o?g(e,"name",{value:t,configurable:!0}):e.name=t),y&&a&&s(a,"arity")&&e.length!==a.arity&&g(e,"length",{value:a.arity});try{a&&s(a,"constructor")&&a.constructor?o&&g(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=u(e);return s(r,"source")||(r.source=b(w,"string"==typeof t?t:"")),e};Function.prototype.toString=S((function toString(){return i(this)&&d(this).source||l(this)}),"toString")},(e,t,a)=>{var r=a(6),n=a(39),i=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,o=n(i,"name"),c=o&&"something"===function something(){}.name,l=o&&(!r||r&&s(i,"name").configurable);e.exports={EXISTS:o,PROPER:c,CONFIGURABLE:l}},(e,t,a)=>{var r=a(14),n=a(21),i=a(37),s=r(Function.toString);n(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},(e,t,a)=>{var r,n,i,s=a(53),o=a(4),c=a(20),l=a(44),h=a(39),u=a(37),d=a(54),f=a(55),g="Object already initialized",p=o.TypeError,m=o.WeakMap;if(s||u.state){var b=u.state||(u.state=new m);b.get=b.get,b.has=b.has,b.set=b.set,r=function(e,t){if(b.has(e))throw p(g);return t.facade=e,b.set(e,t),t},n=function(e){return b.get(e)||{}},i=function(e){return b.has(e)}}else{var y=d("state");f[y]=!0,r=function(e,t){if(h(e,y))throw p(g);return t.facade=e,l(e,y,t),t},n=function(e){return h(e,y)?e[y]:{}},i=function(e){return h(e,y)}}e.exports={set:r,get:n,has:i,enforce:function(e){return i(e)?n(e):r(e,{})},getterFor:function(e){return function(t){var a;if(!c(t)||(a=n(t)).type!==e)throw p("Incompatible receiver, "+e+" required");return a}}}},(e,t,a)=>{var r=a(4),n=a(21),i=r.WeakMap;e.exports=n(i)&&/native code/.test(String(i))},(e,t,a)=>{var r=a(35),n=a(41),i=r("keys");e.exports=function(e){return i[e]||(i[e]=n(e))}},e=>{e.exports={}},(e,t,a)=>{var r=a(39),n=a(57),i=a(5),s=a(45);e.exports=function(e,t,a){for(var o=n(t),c=s.f,l=i.f,h=0;h<o.length;h++){var u=o[h];r(e,u)||a&&r(a,u)||c(e,u,l(t,u))}}},(e,t,a)=>{var r=a(24),n=a(14),i=a(58),s=a(67),o=a(47),c=n([].concat);e.exports=r("Reflect","ownKeys")||function ownKeys(e){var t=i.f(o(e)),a=s.f;return a?c(t,a(e)):t}},(e,t,a)=>{var r=a(59),n=a(66).concat("length","prototype");t.f=Object.getOwnPropertyNames||function getOwnPropertyNames(e){return r(e,n)}},(e,t,a)=>{var r=a(14),n=a(39),i=a(12),s=a(60).indexOf,o=a(55),c=r([].push);e.exports=function(e,t){var a,r=i(e),l=0,h=[];for(a in r)!n(o,a)&&n(r,a)&&c(h,a);for(;t.length>l;)n(r,a=t[l++])&&(~s(h,a)||c(h,a));return h}},(e,t,a)=>{var r=a(12),n=a(61),i=a(64),createMethod=function(e){return function(t,a,s){var o,c=r(t),l=i(c),h=n(s,l);if(e&&a!=a){for(;l>h;)if((o=c[h++])!=o)return!0}else for(;l>h;h++)if((e||h in c)&&c[h]===a)return e||h||0;return!e&&-1}};e.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(e,t,a)=>{var r=a(62),n=Math.max,i=Math.min;e.exports=function(e,t){var a=r(e);return a<0?n(a+t,0):i(a,t)}},(e,t,a)=>{var r=a(63);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},e=>{var t=Math.ceil,a=Math.floor;e.exports=Math.trunc||function trunc(e){var r=+e;return(r>0?a:t)(r)}},(e,t,a)=>{var r=a(65);e.exports=function(e){return r(e.length)}},(e,t,a)=>{var r=a(62),n=Math.min;e.exports=function(e){return e>0?n(r(e),9007199254740991):0}},e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(e,t)=>{t.f=Object.getOwnPropertySymbols},(e,t,a)=>{var r=a(7),n=a(21),i=/#|\.prototype\./,isForced=function(e,t){var a=o[s(e)];return a===l||a!==c&&(n(t)?r(t):!!t)},s=isForced.normalize=function(e){return String(e).replace(i,".").toLowerCase()},o=isForced.data={},c=isForced.NATIVE="N",l=isForced.POLYFILL="P";e.exports=isForced},(e,t,a)=>{var r=a(9),n=Function.prototype,i=n.apply,s=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(i):function(){return s.apply(i,arguments)})},(e,t,a)=>{var r=a(24),n=a(39),i=a(44),s=a(25),o=a(71),c=a(56),l=a(74),h=a(75),u=a(76),d=a(80),f=a(81),g=a(6),p=a(36);e.exports=function(e,t,a,m){var b="stackTraceLimit",y=m?2:1,w=e.split("."),S=w[w.length-1],x=r.apply(null,w);if(x){var C=x.prototype;if(!p&&n(C,"cause")&&delete C.cause,!a)return x;var v=r("Error"),k=t((function(e,t){var a=u(m?t:e,void 0),r=m?new x(e):new x;return void 0!==a&&i(r,"message",a),f(r,k,r.stack,2),this&&s(C,this)&&h(r,this,k),arguments.length>y&&d(r,arguments[y]),r}));if(k.prototype=C,"Error"!==S?o?o(k,v):c(k,v,{name:!0}):g&&b in x&&(l(k,x,b),l(k,x,"prepareStackTrace")),c(k,x),!p)try{C.name!==S&&i(C,"name",S),C.constructor=k}catch(e){}return k}}},(e,t,a)=>{var r=a(72),n=a(47),i=a(73);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,a={};try{(e=r(Object.prototype,"__proto__","set"))(a,[]),t=a instanceof Array}catch(e){}return function setPrototypeOf(a,r){return n(a),i(r),t?e(a,r):a.__proto__=r,a}}():void 0)},(e,t,a)=>{var r=a(14),n=a(31);e.exports=function(e,t,a){try{return r(n(Object.getOwnPropertyDescriptor(e,t)[a]))}catch(e){}}},(e,t,a)=>{var r=a(21),n=String,i=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw i("Can't set "+n(e)+" as a prototype")}},(e,t,a)=>{var r=a(45).f;e.exports=function(e,t,a){a in e||r(e,a,{configurable:!0,get:function(){return t[a]},set:function(e){t[a]=e}})}},(e,t,a)=>{var r=a(21),n=a(20),i=a(71);e.exports=function(e,t,a){var s,o;return i&&r(s=t.constructor)&&s!==a&&n(o=s.prototype)&&o!==a.prototype&&i(e,o),e}},(e,t,a)=>{var r=a(77);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},(e,t,a)=>{var r=a(78),n=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return n(e)}},(e,t,a)=>{var r=a(79),n=a(21),i=a(15),s=a(34)("toStringTag"),o=Object,c="Arguments"===i(function(){return arguments}());e.exports=r?i:function(e){var t,a,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=function(e,t){try{return e[t]}catch(e){}}(t=o(e),s))?a:c?i(t):"Object"===(r=i(t))&&n(t.callee)?"Arguments":r}},(e,t,a)=>{var r={};r[a(34)("toStringTag")]="z",e.exports="[object z]"===String(r)},(e,t,a)=>{var r=a(20),n=a(44);e.exports=function(e,t){r(t)&&"cause"in t&&n(e,"cause",t.cause)}},(e,t,a)=>{var r=a(44),n=a(82),i=a(83),s=Error.captureStackTrace;e.exports=function(e,t,a,o){i&&(s?s(e,t):r(e,"stack",n(a,o)))}},(e,t,a)=>{var r=a(14),n=Error,i=r("".replace),s=String(n("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,c=o.test(s);e.exports=function(e,t){if(c&&"string"==typeof e&&!n.prepareStackTrace)for(;t--;)e=i(e,o,"");return e}},(e,t,a)=>{var r=a(7),n=a(11);e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",n(1,7)),7!==e.stack)}))},(e,t,a)=>{var r=a(85),n=a(90).findLast,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("findLast",(function findLast(e){return n(i(this),e,arguments.length>1?arguments[1]:void 0)}))},(e,t,a)=>{var r,n,i,s=a(86),o=a(6),c=a(4),l=a(21),h=a(20),u=a(39),d=a(78),f=a(32),g=a(44),p=a(48),m=a(87),b=a(25),y=a(88),w=a(71),S=a(34),x=a(41),C=a(52),v=C.enforce,k=C.get,O=c.Int8Array,T=O&&O.prototype,M=c.Uint8ClampedArray,E=M&&M.prototype,D=O&&y(O),R=T&&y(T),N=Object.prototype,L=c.TypeError,$=S("toStringTag"),_=x("TYPED_ARRAY_TAG"),j="TypedArrayConstructor",U=s&&!!w&&"Opera"!==d(c.opera),X=!1,H={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},q={BigInt64Array:8,BigUint64Array:8},getTypedArrayConstructor=function(e){var t=y(e);if(h(t)){var a=k(t);return a&&u(a,j)?a[j]:getTypedArrayConstructor(t)}},isTypedArray=function(e){if(!h(e))return!1;var t=d(e);return u(H,t)||u(q,t)};for(r in H)(i=(n=c[r])&&n.prototype)?v(i)[j]=n:U=!1;for(r in q)(i=(n=c[r])&&n.prototype)&&(v(i)[j]=n);if((!U||!l(D)||D===Function.prototype)&&(D=function TypedArray(){throw L("Incorrect invocation")},U))for(r in H)c[r]&&w(c[r],D);if((!U||!R||R===N)&&(R=D.prototype,U))for(r in H)c[r]&&w(c[r].prototype,R);if(U&&y(E)!==R&&w(E,R),o&&!u(R,$))for(r in X=!0,m(R,$,{configurable:!0,get:function(){return h(this)?this[_]:void 0}}),H)c[r]&&g(c[r],_,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:U,TYPED_ARRAY_TAG:X&&_,aTypedArray:function(e){if(isTypedArray(e))return e;throw L("Target is not a typed array")},aTypedArrayConstructor:function(e){if(l(e)&&(!w||b(D,e)))return e;throw L(f(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,a,r){if(o){if(a)for(var n in H){var i=c[n];if(i&&u(i.prototype,e))try{delete i.prototype[e]}catch(a){try{i.prototype[e]=t}catch(e){}}}R[e]&&!a||p(R,e,a?t:U&&T[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,a){var r,n;if(o){if(w){if(a)for(r in H)if((n=c[r])&&u(n,e))try{delete n[e]}catch(e){}if(D[e]&&!a)return;try{return p(D,e,a?t:U&&D[e]||t)}catch(e){}}for(r in H)!(n=c[r])||n[e]&&!a||p(n,e,t)}},getTypedArrayConstructor:getTypedArrayConstructor,isView:function isView(e){if(!h(e))return!1;var t=d(e);return"DataView"===t||u(H,t)||u(q,t)},isTypedArray:isTypedArray,TypedArray:D,TypedArrayPrototype:R}},e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(e,t,a)=>{var r=a(49),n=a(45);e.exports=function(e,t,a){return a.get&&r(a.get,t,{getter:!0}),a.set&&r(a.set,t,{setter:!0}),n.f(e,t,a)}},(e,t,a)=>{var r=a(39),n=a(21),i=a(40),s=a(54),o=a(89),c=s("IE_PROTO"),l=Object,h=l.prototype;e.exports=o?l.getPrototypeOf:function(e){var t=i(e);if(r(t,c))return t[c];var a=t.constructor;return n(a)&&t instanceof a?a.prototype:t instanceof l?h:null}},(e,t,a)=>{var r=a(7);e.exports=!r((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},(e,t,a)=>{var r=a(91),n=a(13),i=a(40),s=a(64),createMethod=function(e){var t=1===e;return function(a,o,c){for(var l,h=i(a),u=n(h),d=r(o,c),f=s(u);f-- >0;)if(d(l=u[f],f,h))switch(e){case 0:return l;case 1:return f}return t?-1:void 0}};e.exports={findLast:createMethod(0),findLastIndex:createMethod(1)}},(e,t,a)=>{var r=a(92),n=a(31),i=a(9),s=r(r.bind);e.exports=function(e,t){return n(e),void 0===t?e:i?s(e,t):function(){return e.apply(t,arguments)}}},(e,t,a)=>{var r=a(15),n=a(14);e.exports=function(e){if("Function"===r(e))return n(e)}},(e,t,a)=>{var r=a(85),n=a(90).findLastIndex,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("findLastIndex",(function findLastIndex(e){return n(i(this),e,arguments.length>1?arguments[1]:void 0)}))},(e,t,a)=>{var r=a(4),n=a(8),i=a(85),s=a(64),o=a(95),c=a(40),l=a(7),h=r.RangeError,u=r.Int8Array,d=u&&u.prototype,f=d&&d.set,g=i.aTypedArray,p=i.exportTypedArrayMethod,m=!l((function(){var e=new Uint8ClampedArray(2);return n(f,e,{length:1,0:3},1),3!==e[1]})),b=m&&i.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var e=new u(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));p("set",(function set(e){g(this);var t=o(arguments.length>1?arguments[1]:void 0,1),a=c(e);if(m)return n(f,this,a,t);var r=this.length,i=s(a),l=0;if(i+t>r)throw h("Wrong length");for(;l<i;)this[t+l]=a[l++]}),!m||b)},(e,t,a)=>{var r=a(96),n=RangeError;e.exports=function(e,t){var a=r(e);if(a%t)throw n("Wrong offset");return a}},(e,t,a)=>{var r=a(62),n=RangeError;e.exports=function(e){var t=r(e);if(t<0)throw n("The argument can't be less than 0");return t}},(e,t,a)=>{var r=a(98),n=a(85),i=n.aTypedArray,s=n.exportTypedArrayMethod,o=n.getTypedArrayConstructor;s("toReversed",(function toReversed(){return r(i(this),o(this))}))},(e,t,a)=>{var r=a(64);e.exports=function(e,t){for(var a=r(e),n=new t(a),i=0;i<a;i++)n[i]=e[a-i-1];return n}},(e,t,a)=>{var r=a(85),n=a(14),i=a(31),s=a(100),o=r.aTypedArray,c=r.getTypedArrayConstructor,l=r.exportTypedArrayMethod,h=n(r.TypedArrayPrototype.sort);l("toSorted",(function toSorted(e){void 0!==e&&i(e);var t=o(this),a=s(c(t),t);return h(a,e)}))},(e,t,a)=>{var r=a(64);e.exports=function(e,t){for(var a=0,n=r(t),i=new e(n);n>a;)i[a]=t[a++];return i}},(e,t,a)=>{var r=a(102),n=a(85),i=a(103),s=a(62),o=a(104),c=n.aTypedArray,l=n.getTypedArrayConstructor,h=n.exportTypedArrayMethod,u=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}();h("with",{with:function(e,t){var a=c(this),n=s(e),h=i(a)?o(t):+t;return r(a,l(a),n,h)}}.with,!u)},(e,t,a)=>{var r=a(64),n=a(62),i=RangeError;e.exports=function(e,t,a,s){var o=r(e),c=n(a),l=c<0?o+c:c;if(l>=o||l<0)throw i("Incorrect index");for(var h=new t(o),u=0;u<o;u++)h[u]=u===l?s:e[u];return h}},(e,t,a)=>{var r=a(78);e.exports=function(e){var t=r(e);return"BigInt64Array"===t||"BigUint64Array"===t}},(e,t,a)=>{var r=a(19),n=TypeError;e.exports=function(e){var t=r(e,"number");if("number"==typeof t)throw n("Can't convert number to bigint");return BigInt(t)}},(e,t,a)=>{var r=a(6),n=a(87),i=a(106),s=ArrayBuffer.prototype;r&&!("detached"in s)&&n(s,"detached",{configurable:!0,get:function detached(){return i(this)}})},(e,t,a)=>{var r=a(14),n=a(107),i=r(ArrayBuffer.prototype.slice);e.exports=function(e){if(0!==n(e))return!1;try{return i(e,0,0),!1}catch(e){return!0}}},(e,t,a)=>{var r=a(72),n=a(15),i=TypeError;e.exports=r(ArrayBuffer.prototype,"byteLength","get")||function(e){if("ArrayBuffer"!==n(e))throw i("ArrayBuffer expected");return e.byteLength}},(e,t,a)=>{var r=a(3),n=a(109);n&&r({target:"ArrayBuffer",proto:!0},{transfer:function transfer(){return n(this,arguments.length?arguments[0]:void 0,!0)}})},(e,t,a)=>{var r=a(4),n=a(14),i=a(72),s=a(110),o=a(106),c=a(107),l=a(111),h=r.TypeError,u=r.structuredClone,d=r.ArrayBuffer,f=r.DataView,g=Math.min,p=d.prototype,m=f.prototype,b=n(p.slice),y=i(p,"resizable","get"),w=i(p,"maxByteLength","get"),S=n(m.getInt8),x=n(m.setInt8);e.exports=l&&function(e,t,a){var r=c(e),n=void 0===t?r:s(t),i=!y||!y(e);if(o(e))throw h("ArrayBuffer is detached");var l=u(e,{transfer:[e]});if(r===n&&(a||i))return l;if(r>=n&&(!a||i))return b(l,0,n);for(var p=a&&!i&&w?{maxByteLength:w(l)}:void 0,m=new d(n,p),C=new f(l),v=new f(m),k=g(n,r),O=0;O<k;O++)x(v,O,S(C,O));return m}},(e,t,a)=>{var r=a(62),n=a(65),i=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=r(e),a=n(t);if(t!==a)throw i("Wrong length or index");return a}},(e,t,a)=>{var r=a(4),n=a(7),i=a(28),s=a(112),o=a(113),c=a(114),l=r.structuredClone;e.exports=!!l&&!n((function(){if(o&&i>92||c&&i>94||s&&i>97)return!1;var e=new ArrayBuffer(8),t=l(e,{transfer:[e]});return 0!==e.byteLength||8!==t.byteLength}))},(e,t,a)=>{var r=a(113),n=a(114);e.exports=!r&&!n&&"object"==typeof window&&"object"==typeof document},e=>{e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(e,t,a)=>{var r=a(4),n=a(15);e.exports="process"===n(r.process)},(e,t,a)=>{var r=a(3),n=a(109);n&&r({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function transferToFixedLength(){return n(this,arguments.length?arguments[0]:void 0,!1)}})},(e,t,a)=>{var r=a(3),n=a(117);r({target:"Set",proto:!0,real:!0,forced:!a(126)("difference")},{difference:n})},(e,t,a)=>{var r=a(118),n=a(119),i=a(120),s=a(123),o=a(124),c=a(121),l=a(122),h=n.has,u=n.remove;e.exports=function difference(e){var t=r(this),a=o(e),n=i(t);return s(t)<=a.size?c(t,(function(e){a.includes(e)&&u(n,e)})):l(a.getIterator(),(function(e){h(t,e)&&u(n,e)})),n}},(e,t,a)=>{var r=a(119).has;e.exports=function(e){return r(e),e}},(e,t,a)=>{var r=a(14),n=Set.prototype;e.exports={Set:Set,add:r(n.add),has:r(n.has),remove:r(n.delete),proto:n}},(e,t,a)=>{var r=a(119),n=a(121),i=r.Set,s=r.add;e.exports=function(e){var t=new i;return n(e,(function(e){s(t,e)})),t}},(e,t,a)=>{var r=a(14),n=a(122),i=a(119),s=i.Set,o=i.proto,c=r(o.forEach),l=r(o.keys),h=l(new s).next;e.exports=function(e,t,a){return a?n({iterator:l(e),next:h},t):c(e,t)}},(e,t,a)=>{var r=a(8);e.exports=function(e,t,a){for(var n,i,s=a?e:e.iterator,o=e.next;!(n=r(o,s)).done;)if(void 0!==(i=t(n.value)))return i}},(e,t,a)=>{var r=a(72),n=a(119);e.exports=r(n.proto,"size","get")||function(e){return e.size}},(e,t,a)=>{var r=a(31),n=a(47),i=a(8),s=a(62),o=a(125),c="Invalid size",l=RangeError,h=TypeError,u=Math.max,SetRecord=function(e,t,a,r){this.set=e,this.size=t,this.has=a,this.keys=r};SetRecord.prototype={getIterator:function(){return o(n(i(this.keys,this.set)))},includes:function(e){return i(this.has,this.set,e)}},e.exports=function(e){n(e);var t=+e.size;if(t!=t)throw h(c);var a=s(t);if(a<0)throw l(c);return new SetRecord(e,u(a,0),r(e.has),r(e.keys))}},e=>{e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},(e,t,a)=>{var r=a(24),createSetLike=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};e.exports=function(e){var t=r("Set");try{(new t)[e](createSetLike(0));try{return(new t)[e](createSetLike(-1)),!1}catch(e){return!0}}catch(e){return!1}}},(e,t,a)=>{var r=a(3),n=a(7),i=a(128);r({target:"Set",proto:!0,real:!0,forced:!a(126)("intersection")||n((function(){return"3,2"!==Array.from(new Set([1,2,3]).intersection(new Set([3,2])))}))},{intersection:i})},(e,t,a)=>{var r=a(118),n=a(119),i=a(123),s=a(124),o=a(121),c=a(122),l=n.Set,h=n.add,u=n.has;e.exports=function intersection(e){var t=r(this),a=s(e),n=new l;return i(t)>a.size?c(a.getIterator(),(function(e){u(t,e)&&h(n,e)})):o(t,(function(e){a.includes(e)&&h(n,e)})),n}},(e,t,a)=>{var r=a(3),n=a(130);r({target:"Set",proto:!0,real:!0,forced:!a(126)("isDisjointFrom")},{isDisjointFrom:n})},(e,t,a)=>{var r=a(118),n=a(119).has,i=a(123),s=a(124),o=a(121),c=a(122),l=a(131);e.exports=function isDisjointFrom(e){var t=r(this),a=s(e);if(i(t)<=a.size)return!1!==o(t,(function(e){if(a.includes(e))return!1}),!0);var h=a.getIterator();return!1!==c(h,(function(e){if(n(t,e))return l(h,"normal",!1)}))}},(e,t,a)=>{var r=a(8),n=a(47),i=a(30);e.exports=function(e,t,a){var s,o;n(e);try{if(!(s=i(e,"return"))){if("throw"===t)throw a;return a}s=r(s,e)}catch(e){o=!0,s=e}if("throw"===t)throw a;if(o)throw s;return n(s),a}},(e,t,a)=>{var r=a(3),n=a(133);r({target:"Set",proto:!0,real:!0,forced:!a(126)("isSubsetOf")},{isSubsetOf:n})},(e,t,a)=>{var r=a(118),n=a(123),i=a(121),s=a(124);e.exports=function isSubsetOf(e){var t=r(this),a=s(e);return!(n(t)>a.size)&&!1!==i(t,(function(e){if(!a.includes(e))return!1}),!0)}},(e,t,a)=>{var r=a(3),n=a(135);r({target:"Set",proto:!0,real:!0,forced:!a(126)("isSupersetOf")},{isSupersetOf:n})},(e,t,a)=>{var r=a(118),n=a(119).has,i=a(123),s=a(124),o=a(122),c=a(131);e.exports=function isSupersetOf(e){var t=r(this),a=s(e);if(i(t)<a.size)return!1;var l=a.getIterator();return!1!==o(l,(function(e){if(!n(t,e))return c(l,"normal",!1)}))}},(e,t,a)=>{var r=a(3),n=a(137);r({target:"Set",proto:!0,real:!0,forced:!a(126)("symmetricDifference")},{symmetricDifference:n})},(e,t,a)=>{var r=a(118),n=a(119),i=a(120),s=a(124),o=a(122),c=n.add,l=n.has,h=n.remove;e.exports=function symmetricDifference(e){var t=r(this),a=s(e).getIterator(),n=i(t);return o(a,(function(e){l(t,e)?h(n,e):c(n,e)})),n}},(e,t,a)=>{var r=a(3),n=a(139);r({target:"Set",proto:!0,real:!0,forced:!a(126)("union")},{union:n})},(e,t,a)=>{var r=a(118),n=a(119).add,i=a(120),s=a(124),o=a(122);e.exports=function union(e){var t=r(this),a=s(e).getIterator(),c=i(t);return o(a,(function(e){n(c,e)})),c}},(e,t,a)=>{var r=a(3),n=a(40),i=a(64),s=a(141),o=a(143);r({target:"Array",proto:!0,arity:1,forced:a(7)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function push(e){var t=n(this),a=i(t),r=arguments.length;o(a+r);for(var c=0;c<r;c++)t[a]=arguments[c],a++;return s(t,a),a}})},(e,t,a)=>{var r=a(6),n=a(142),i=TypeError,s=Object.getOwnPropertyDescriptor,o=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=o?function(e,t){if(n(e)&&!s(e,"length").writable)throw i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},(e,t,a)=>{var r=a(15);e.exports=Array.isArray||function isArray(e){return"Array"===r(e)}},e=>{var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},(e,t,a)=>{var r=a(3),n=a(4),i=a(87),s=a(6),o=TypeError,c=Object.defineProperty,l=n.self!==n;try{if(s){var h=Object.getOwnPropertyDescriptor(n,"self");!l&&h&&h.get&&h.enumerable||i(n,"self",{get:function self(){return n},set:function self(e){if(this!==n)throw o("Illegal invocation");c(n,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else r({global:!0,simple:!0,forced:l},{self:n})}catch(e){}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=function assert(e,t){e||unreachable(t)},t.bytesToString=bytesToString,t.createValidAbsoluteUrl=function createValidAbsoluteUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(a&&"string"==typeof e){if(a.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);t?.length>=2&&(e=`http://${e}`)}if(a.tryConvertEncoding)try{e=stringToUTF8String(e)}catch{}}const r=t?new URL(e,t):new URL(e);if(function _isValidProtocol(e){switch(e?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch{}return null},t.getModificationDate=function getModificationDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},t.getUuid=function getUuid(){if("undefined"!=typeof crypto&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(e);else for(let t=0;t<32;t++)e[t]=Math.floor(255*Math.random());return bytesToString(e)},t.getVerbosityLevel=function getVerbosityLevel(){return i},t.info=function info(e){i>=n.INFOS&&console.log(`Info: ${e}`)},t.isArrayBuffer=function isArrayBuffer(e){return"object"==typeof e&&void 0!==e?.byteLength},t.isArrayEqual=function isArrayEqual(e,t){if(e.length!==t.length)return!1;for(let a=0,r=e.length;a<r;a++)if(e[a]!==t[a])return!1;return!0},t.isNodeJS=void 0,t.normalizeUnicode=function normalizeUnicode(e){l||(l=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,h=new Map([["ﬅ","ſt"]]));return e.replaceAll(l,((e,t,a)=>t?t.normalize("NFKC"):h.get(a)))},t.objectFromMap=function objectFromMap(e){const t=Object.create(null);for(const[a,r]of e)t[a]=r;return t},t.objectSize=function objectSize(e){return Object.keys(e).length},t.setVerbosityLevel=function setVerbosityLevel(e){Number.isInteger(e)&&(i=e)},t.shadow=shadow,t.string32=function string32(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=stringToBytes,t.stringToPDFString=function stringToPDFString(e){if(e[0]>="ï"){let t;if("þ"===e[0]&&"ÿ"===e[1]?t="utf-16be":"ÿ"===e[0]&&"þ"===e[1]?t="utf-16le":"ï"===e[0]&&"»"===e[1]&&"¿"===e[2]&&(t="utf-8"),t)try{const a=new TextDecoder(t,{fatal:!0}),r=stringToBytes(e);return a.decode(r)}catch(e){warn(`stringToPDFString: "${e}".`)}}const t=[];for(let a=0,r=e.length;a<r;a++){const r=c[e.charCodeAt(a)];t.push(r?String.fromCharCode(r):e.charAt(a))}return t.join("")},t.stringToUTF8String=stringToUTF8String,t.unreachable=unreachable,t.utf8StringToString=function utf8StringToString(e){return unescape(encodeURIComponent(e))},t.warn=warn,a(2),a(146),a(148),a(149),a(140),a(84),a(93),a(94),a(97),a(99),a(101),a(105),a(108),a(115);const r=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=r;t.IDENTITY_MATRIX=[1,0,0,1,0,0];t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];t.MAX_IMAGE_SIZE_TO_CACHE=1e7;t.LINE_FACTOR=1.35;t.LINE_DESCENT_FACTOR=.35;t.BASELINE_FACTOR=.25925925925925924;t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationEditorPrefix="pdfjs_internal_editor_";t.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationReplyType={GROUP:"Group",REPLY:"R"};t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.PageActionEventType={O:"PageOpen",C:"PageClose"};const n={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=n;t.CMapCompressionType={NONE:0,BINARY:1};t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let i=n.WARNINGS;function warn(e){i>=n.WARNINGS&&console.log(`Warning: ${e}`)}function unreachable(e){throw new Error(e)}function shadow(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:a,enumerable:!r,configurable:!0,writable:!1}),a}const s=function BaseExceptionClosure(){function BaseException(e,t){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=e,this.name=t}return BaseException.prototype=new Error,BaseException.constructor=BaseException,BaseException}();t.BaseException=s;t.PasswordException=class PasswordException extends s{constructor(e,t){super(e,"PasswordException"),this.code=t}};t.UnknownErrorException=class UnknownErrorException extends s{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}};t.InvalidPDFException=class InvalidPDFException extends s{constructor(e){super(e,"InvalidPDFException")}};t.MissingPDFException=class MissingPDFException extends s{constructor(e){super(e,"MissingPDFException")}};t.UnexpectedResponseException=class UnexpectedResponseException extends s{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}};t.FormatError=class FormatError extends s{constructor(e){super(e,"FormatError")}};function bytesToString(e){"object"==typeof e&&void 0!==e?.length||unreachable("Invalid argument for bytesToString");const t=e.length,a=8192;if(t<a)return String.fromCharCode.apply(null,e);const r=[];for(let n=0;n<t;n+=a){const i=Math.min(n+a,t),s=e.subarray(n,i);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function stringToBytes(e){"string"!=typeof e&&unreachable("Invalid argument for stringToBytes");const t=e.length,a=new Uint8Array(t);for(let r=0;r<t;++r)a[r]=255&e.charCodeAt(r);return a}t.AbortException=class AbortException extends s{constructor(e){super(e,"AbortException")}};t.FeatureTest=class FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",function isLittleEndian(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return shadow(this,"isEvalSupported",function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"==typeof navigator?shadow(this,"platform",{isWin:!1,isMac:!1}):shadow(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return shadow(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}};const o=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));t.Util=class Util{static makeHexColor(e,t,a){return`#${o[e]}${o[t]}${o[a]}`}static scaleMinMax(e,t){let a;e[0]?(e[0]<0&&(a=t[0],t[0]=t[1],t[1]=a),t[0]*=e[0],t[1]*=e[0],e[3]<0&&(a=t[2],t[2]=t[3],t[3]=a),t[2]*=e[3],t[3]*=e[3]):(a=t[0],t[0]=t[2],t[2]=a,a=t[1],t[1]=t[3],t[3]=a,e[1]<0&&(a=t[2],t[2]=t[3],t[3]=a),t[2]*=e[1],t[3]*=e[1],e[2]<0&&(a=t[0],t[0]=t[1],t[1]=a),t[0]*=e[2],t[1]*=e[2]),t[0]+=e[4],t[1]+=e[4],t[2]+=e[5],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const a=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/a,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/a]}static getAxialAlignedBoundingBox(e,t){const a=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),n=this.applyTransform([e[0],e[3]],t),i=this.applyTransform([e[2],e[1]],t);return[Math.min(a[0],r[0],n[0],i[0]),Math.min(a[1],r[1],n[1],i[1]),Math.max(a[0],r[0],n[0],i[0]),Math.max(a[1],r[1],n[1],i[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],a=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],n=e[2]*t[0]+e[3]*t[2],i=e[2]*t[1]+e[3]*t[3],s=(a+i)/2,o=Math.sqrt((a+i)**2-4*(a*i-n*r))/2,c=s+o||1,l=s-o||1;return[Math.sqrt(c),Math.sqrt(l)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const a=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(a>r)return null;const n=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),i=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return n>i?null:[a,n,r,i]}static bezierBoundingBox(e,t,a,r,n,i,s,o){const c=[],l=[[],[]];let h,u,d,f,g,p,m,b;for(let l=0;l<2;++l)if(0===l?(u=6*e-12*a+6*n,h=-3*e+9*a-9*n+3*s,d=3*a-3*e):(u=6*t-12*r+6*i,h=-3*t+9*r-9*i+3*o,d=3*r-3*t),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;f=-d/u,0<f&&f<1&&c.push(f)}else m=u*u-4*d*h,b=Math.sqrt(m),m<0||(g=(-u+b)/(2*h),0<g&&g<1&&c.push(g),p=(-u-b)/(2*h),0<p&&p<1&&c.push(p));let y,w=c.length;const S=w;for(;w--;)f=c[w],y=1-f,l[0][w]=y*y*y*e+3*y*y*f*a+3*y*f*f*n+f*f*f*s,l[1][w]=y*y*y*t+3*y*y*f*r+3*y*f*f*i+f*f*f*o;return l[0][S]=e,l[1][S]=t,l[0][S+1]=s,l[1][S+1]=o,l[0].length=l[1].length=S+2,[Math.min(...l[0]),Math.min(...l[1]),Math.max(...l[0]),Math.max(...l[1])]}};const c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(e){return decodeURIComponent(escape(e))}t.PromiseCapability=class PromiseCapability{#e=!1;constructor(){this.promise=new Promise(((e,t)=>{this.resolve=t=>{this.#e=!0,e(t)},this.reject=e=>{this.#e=!0,t(e)}}))}get settled(){return this.#e}};let l=null,h=null;t.AnnotationPrefix="pdfjs_internal_id_"},(e,t,a)=>{var r=a(48),n=a(14),i=a(77),s=a(147),o=URLSearchParams,c=o.prototype,l=n(c.append),h=n(c.delete),u=n(c.forEach),d=n([].push),f=new o("a=1&a=2&b=3");f.delete("a",1),f.delete("b",void 0),f+""!="a=2"&&r(c,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return h(this,e);var r=[];u(this,(function(e,t){d(r,{key:t,value:e})})),s(t,1);for(var n,o=i(e),c=i(a),f=0,g=0,p=!1,m=r.length;f<m;)n=r[f++],p||n.key===o?(p=!0,h(this,n.key)):g++;for(;g<m;)(n=r[g++]).key===o&&n.value===c||l(this,n.key,n.value)}),{enumerable:!0,unsafe:!0})},e=>{var t=TypeError;e.exports=function(e,a){if(e<a)throw t("Not enough arguments");return e}},(e,t,a)=>{var r=a(48),n=a(14),i=a(77),s=a(147),o=URLSearchParams,c=o.prototype,l=n(c.getAll),h=n(c.has),u=new o("a=1");!u.has("a",2)&&u.has("a",void 0)||r(c,"has",(function has(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return h(this,e);var r=l(this,e);s(t,1);for(var n=i(a),o=0;o<r.length;)if(r[o++]===n)return!0;return!1}),{enumerable:!0,unsafe:!0})},(e,t,a)=>{var r=a(6),n=a(14),i=a(87),s=URLSearchParams.prototype,o=n(s.forEach);r&&!("size"in s)&&i(s,"size",{get:function size(){var e=0;return o(this,(function(){e++})),e},configurable:!0,enumerable:!0})},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XRefParseException=t.XRefEntryException=t.ParserEOFException=t.PDF_VERSION_REGEXP=t.MissingDataException=void 0,t.arrayBuffersToBytes=function arrayBuffersToBytes(e){const t=e.length;if(0===t)return new Uint8Array(0);if(1===t)return new Uint8Array(e[0]);let a=0;for(let r=0;r<t;r++)a+=e[r].byteLength;const r=new Uint8Array(a);let n=0;for(let a=0;a<t;a++){const t=new Uint8Array(e[a]);r.set(t,n),n+=t.byteLength}return r},t.collectActions=function collectActions(e,t,a){const i=Object.create(null),s=getInheritableProperty({dict:t,key:"AA",stopWhenFound:!1});if(s)for(let t=s.length-1;t>=0;t--){const r=s[t];if(r instanceof n.Dict)for(const t of r.getKeys()){const s=a[t];if(!s)continue;const o=[];_collectJS(r.getRaw(t),e,o,new n.RefSet),o.length>0&&(i[s]=o)}}if(t.has("A")){const a=[];_collectJS(t.get("A"),e,a,new n.RefSet),a.length>0&&(i.Action=a)}return(0,r.objectSize)(i)>0?i:null},t.encodeToXmlString=function encodeToXmlString(e){const t=[];let a=0;for(let r=0,n=e.length;r<n;r++){const n=e.codePointAt(r);if(32<=n&&n<=126){const i=o[n];i&&(a<r&&t.push(e.substring(a,r)),t.push(i),a=r+1)}else a<r&&t.push(e.substring(a,r)),t.push(`&#x${n.toString(16).toUpperCase()};`),n>55295&&(n<57344||n>65533)&&r++,a=r+1}if(0===t.length)return e;a<e.length&&t.push(e.substring(a,e.length));return t.join("")},t.escapePDFName=function escapePDFName(e){const t=[];let a=0;for(let r=0,n=e.length;r<n;r++){const n=e.charCodeAt(r);(n<33||n>126||35===n||40===n||41===n||60===n||62===n||91===n||93===n||123===n||125===n||47===n||37===n)&&(a<r&&t.push(e.substring(a,r)),t.push(`#${n.toString(16)}`),a=r+1)}if(0===t.length)return e;a<e.length&&t.push(e.substring(a,e.length));return t.join("")},t.escapeString=function escapeString(e){return e.replaceAll(/([()\\\n\r])/g,(e=>"\n"===e?"\\n":"\r"===e?"\\r":`\\${e}`))},t.getInheritableProperty=getInheritableProperty,t.getLookupTableFactory=function getLookupTableFactory(e){let t;return function(){return e&&(t=Object.create(null),e(t),e=null),t}},t.getNewAnnotationsMap=function getNewAnnotationsMap(e){if(!e)return null;const t=new Map;for(const[a,n]of e){if(!a.startsWith(r.AnnotationEditorPrefix))continue;let e=t.get(n.pageIndex);e||(e=[],t.set(n.pageIndex,e)),e.push(n)}return t.size>0?t:null},t.getRotationMatrix=function getRotationMatrix(e,t,a){switch(e){case 90:return[0,1,-1,0,t,0];case 180:return[-1,0,0,-1,t,a];case 270:return[0,-1,1,0,0,a];default:throw new Error("Invalid rotation")}},t.isAscii=function isAscii(e){return/^[\x00-\x7F]*$/.test(e)},t.isWhiteSpace=function isWhiteSpace(e){return 32===e||9===e||13===e||10===e},t.log2=function log2(e){if(e<=0)return 0;return Math.ceil(Math.log2(e))},t.numberToString=function numberToString(e){if(Number.isInteger(e))return e.toString();const t=Math.round(100*e);if(t%100==0)return(t/100).toString();if(t%10==0)return e.toFixed(1);return e.toFixed(2)},t.parseXFAPath=function parseXFAPath(e){const t=/(.+)\[(\d+)\]$/;return e.split(".").map((e=>{const a=e.match(t);return a?{name:a[1],pos:parseInt(a[2],10)}:{name:e,pos:0}}))},t.readInt8=function readInt8(e,t){return e[t]<<24>>24},t.readUint16=function readUint16(e,t){return e[t]<<8|e[t+1]},t.readUint32=function readUint32(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0},t.recoverJsURL=function recoverJsURL(e){const t=new RegExp("^\\s*("+["app.launchURL","window.open","xfa.host.gotoURL"].join("|").replaceAll(".","\\.")+")\\((?:'|\")([^'\"]*)(?:'|\")(?:,\\s*(\\w+)\\)|\\))","i").exec(e);if(t?.[2]){const e=t[2];let a=!1;return"true"===t[3]&&"app.launchURL"===t[1]&&(a=!0),{url:e,newWindow:a}}return null},t.stringToUTF16HexString=function stringToUTF16HexString(e){const t=[];for(let a=0,r=e.length;a<r;a++){const r=e.charCodeAt(a);t.push((r>>8&255).toString(16).padStart(2,"0"),(255&r).toString(16).padStart(2,"0"))}return t.join("")},t.stringToUTF16String=function stringToUTF16String(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=[];t&&a.push("þÿ");for(let t=0,r=e.length;t<r;t++){const r=e.charCodeAt(t);a.push(String.fromCharCode(r>>8&255),String.fromCharCode(255&r))}return a.join("")},t.toRomanNumerals=function toRomanNumerals(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,r.assert)(Number.isInteger(e)&&e>0,"The number should be a positive integer.");const a=[];let n;for(;e>=1e3;)e-=1e3,a.push("M");n=e/100|0,e%=100,a.push(s[n]),n=e/10|0,e%=10,a.push(s[10+n]),a.push(s[20+e]);const i=a.join("");return t?i.toLowerCase():i},t.validateCSSFont=function validateCSSFont(e){const t=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]),{fontFamily:a,fontWeight:r,italicAngle:n}=e;if(!validateFontName(a,!0))return!1;const i=r?r.toString():"";e.fontWeight=t.has(i)?i:"400";const s=parseFloat(n);return e.italicAngle=isNaN(s)||s<-90||s>90?"14":n.toString(),!0},t.validateFontName=validateFontName,a(84),a(93),a(94),a(97),a(99),a(101),a(105),a(108),a(115),a(140),a(116),a(127),a(129),a(132),a(134),a(136),a(138),a(2);var r=a(145),n=a(151),i=a(152);t.PDF_VERSION_REGEXP=/^[1-9]\.\d$/;class MissingDataException extends r.BaseException{constructor(e,t){super(`Missing data [${e}, ${t})`,"MissingDataException"),this.begin=e,this.end=t}}t.MissingDataException=MissingDataException;class ParserEOFException extends r.BaseException{constructor(e){super(e,"ParserEOFException")}}t.ParserEOFException=ParserEOFException;class XRefEntryException extends r.BaseException{constructor(e){super(e,"XRefEntryException")}}t.XRefEntryException=XRefEntryException;class XRefParseException extends r.BaseException{constructor(e){super(e,"XRefParseException")}}function getInheritableProperty(e){let t,{dict:a,key:r,getArray:i=!1,stopWhenFound:s=!0}=e;const o=new n.RefSet;for(;a instanceof n.Dict&&(!a.objId||!o.has(a.objId));){a.objId&&o.put(a.objId);const e=i?a.getArray(r):a.get(r);if(void 0!==e){if(s)return e;(t||=[]).push(e)}a=a.get("Parent")}return t}t.XRefParseException=XRefParseException;const s=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function _collectJS(e,t,a,s){if(!e)return;let o=null;if(e instanceof n.Ref){if(s.has(e))return;o=e,s.put(o),e=t.fetch(e)}if(Array.isArray(e))for(const r of e)_collectJS(r,t,a,s);else if(e instanceof n.Dict){if((0,n.isName)(e.get("S"),"JavaScript")){const t=e.get("JS");let n;t instanceof i.BaseStream?n=t.getString():"string"==typeof t&&(n=t),n&&=(0,r.stringToPDFString)(n).replaceAll("\0",""),n&&a.push(n)}_collectJS(e.getRaw("Next"),t,a,s)}o&&s.remove(o)}const o={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"};function validateFontName(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=/^("|').*("|')$/.exec(e);if(a&&a[1]===a[2]){if(new RegExp(`[^\\\\]${a[1]}`).test(e.slice(1,-1)))return t&&(0,r.warn)(`FontFamily contains unescaped ${a[1]}: ${e}.`),!1}else for(const a of e.split(/[ \t]+/))if(/^(\d|(-(\d|-)))/.test(a)||!/^[\w-\\]+$/.test(a))return t&&(0,r.warn)(`FontFamily contains invalid <custom-ident>: ${e}.`),!1;return!0}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RefSetCache=t.RefSet=t.Ref=t.Name=t.EOF=t.Dict=t.Cmd=t.CIRCULAR_REF=void 0,t.clearPrimitiveCaches=function clearPrimitiveCaches(){s=Object.create(null),o=Object.create(null),c=Object.create(null)},t.isCmd=function isCmd(e,t){return e instanceof Cmd&&(void 0===t||e.cmd===t)},t.isDict=function isDict(e,t){return e instanceof Dict&&(void 0===t||isName(e.get("Type"),t))},t.isName=isName,t.isRefsEqual=function isRefsEqual(e,t){return e.num===t.num&&e.gen===t.gen},a(140),a(116),a(127),a(129),a(132),a(134),a(136),a(138);var r=a(145);const n=Symbol("CIRCULAR_REF");t.CIRCULAR_REF=n;const i=Symbol("EOF");t.EOF=i;let s=Object.create(null),o=Object.create(null),c=Object.create(null);class Name{constructor(e){this.name=e}static get(e){return o[e]||=new Name(e)}}t.Name=Name;class Cmd{constructor(e){this.cmd=e}static get(e){return s[e]||=new Cmd(e)}}t.Cmd=Cmd;const l=function nonSerializableClosure(){return l};class Dict{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._map=Object.create(null),this.xref=e,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=l}assignXref(e){this.xref=e}get size(){return Object.keys(this._map).length}get(e,t,a){let r=this._map[e];return void 0===r&&void 0!==t&&(r=this._map[t],void 0===r&&void 0!==a&&(r=this._map[a])),r instanceof Ref&&this.xref?this.xref.fetch(r,this.suppressEncryption):r}async getAsync(e,t,a){let r=this._map[e];return void 0===r&&void 0!==t&&(r=this._map[t],void 0===r&&void 0!==a&&(r=this._map[a])),r instanceof Ref&&this.xref?this.xref.fetchAsync(r,this.suppressEncryption):r}getArray(e,t,a){let r=this._map[e];if(void 0===r&&void 0!==t&&(r=this._map[t],void 0===r&&void 0!==a&&(r=this._map[a])),r instanceof Ref&&this.xref&&(r=this.xref.fetch(r,this.suppressEncryption)),Array.isArray(r)){r=r.slice();for(let e=0,t=r.length;e<t;e++)r[e]instanceof Ref&&this.xref&&(r[e]=this.xref.fetch(r[e],this.suppressEncryption))}return r}getRaw(e){return this._map[e]}getKeys(){return Object.keys(this._map)}getRawValues(){return Object.values(this._map)}set(e,t){this._map[e]=t}has(e){return void 0!==this._map[e]}forEach(e){for(const t in this._map)e(t,this.get(t))}static get empty(){const e=new Dict(null);return e.set=(e,t)=>{(0,r.unreachable)("Should not call `set` on the empty dictionary.")},(0,r.shadow)(this,"empty",e)}static merge(e){let{xref:t,dictArray:a,mergeSubDicts:r=!1}=e;const n=new Dict(t),i=new Map;for(const e of a)if(e instanceof Dict)for(const[t,a]of Object.entries(e._map)){let e=i.get(t);if(void 0===e)e=[],i.set(t,e);else if(!(r&&a instanceof Dict))continue;e.push(a)}for(const[e,a]of i){if(1===a.length||!(a[0]instanceof Dict)){n._map[e]=a[0];continue}const r=new Dict(t);for(const e of a)for(const[t,a]of Object.entries(e._map))void 0===r._map[t]&&(r._map[t]=a);r.size>0&&(n._map[e]=r)}return i.clear(),n.size>0?n:Dict.empty}clone(){const e=new Dict(this.xref);for(const t of this.getKeys())e.set(t,this.getRaw(t));return e}}t.Dict=Dict;class Ref{constructor(e,t){this.num=e,this.gen=t}toString(){return 0===this.gen?`${this.num}R`:`${this.num}R${this.gen}`}static fromString(e){const t=c[e];if(t)return t;const a=/^(\d+)R(\d*)$/.exec(e);return a&&"0"!==a[1]?c[e]=new Ref(parseInt(a[1]),a[2]?parseInt(a[2]):0):null}static get(e,t){const a=0===t?`${e}R`:`${e}R${t}`;return c[a]||=new Ref(e,t)}}t.Ref=Ref;class RefSet{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._set=new Set(e?._set)}has(e){return this._set.has(e.toString())}put(e){this._set.add(e.toString())}remove(e){this._set.delete(e.toString())}[Symbol.iterator](){return this._set.values()}clear(){this._set.clear()}}t.RefSet=RefSet;class RefSetCache{constructor(){this._map=new Map}get size(){return this._map.size}get(e){return this._map.get(e.toString())}has(e){return this._map.has(e.toString())}put(e,t){this._map.set(e.toString(),t)}putAlias(e,t){this._map.set(e.toString(),this.get(t))}[Symbol.iterator](){return this._map.values()}clear(){this._map.clear()}}function isName(e,t){return e instanceof Name&&(void 0===t||e.name===t)}t.RefSetCache=RefSetCache},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStream=void 0;var r=a(145);class BaseStream{constructor(){this.constructor===BaseStream&&(0,r.unreachable)("Cannot initialize BaseStream.")}get length(){(0,r.unreachable)("Abstract getter `length` accessed")}get isEmpty(){(0,r.unreachable)("Abstract getter `isEmpty` accessed")}get isDataLoaded(){return(0,r.shadow)(this,"isDataLoaded",!0)}getByte(){(0,r.unreachable)("Abstract method `getByte` called")}getBytes(e){(0,r.unreachable)("Abstract method `getBytes` called")}peekByte(){const e=this.getByte();return-1!==e&&this.pos--,e}peekBytes(e){const t=this.getBytes(e);return this.pos-=t.length,t}getUint16(){const e=this.getByte(),t=this.getByte();return-1===e||-1===t?-1:(e<<8)+t}getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()}getByteRange(e,t){(0,r.unreachable)("Abstract method `getByteRange` called")}getString(e){return(0,r.bytesToString)(this.getBytes(e))}skip(e){this.pos+=e||1}reset(){(0,r.unreachable)("Abstract method `reset` called")}moveStart(){(0,r.unreachable)("Abstract method `moveStart` called")}makeSubStream(e,t){(0,r.unreachable)("Abstract method `makeSubStream` called")}getBaseStreams(){return null}}t.BaseStream=BaseStream},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkPdfManager=t.LocalPdfManager=void 0;var r=a(145),n=a(154),i=a(150),s=a(156),o=a(155);class BasePdfManager{constructor(e){this.constructor===BasePdfManager&&(0,r.unreachable)("Cannot initialize BasePdfManager."),this._docBaseUrl=function parseDocBaseUrl(e){if(e){const t=(0,r.createValidAbsoluteUrl)(e);if(t)return t.href;(0,r.warn)(`Invalid absolute docBaseUrl: "${e}".`)}return null}(e.docBaseUrl),this._docId=e.docId,this._password=e.password,this.enableXfa=e.enableXfa,e.evaluatorOptions.isOffscreenCanvasSupported&&=r.FeatureTest.isOffscreenCanvasSupported,this.evaluatorOptions=e.evaluatorOptions}get docId(){return this._docId}get password(){return this._password}get docBaseUrl(){return this._docBaseUrl}get catalog(){return this.pdfDocument.catalog}ensureDoc(e,t){return this.ensure(this.pdfDocument,e,t)}ensureXRef(e,t){return this.ensure(this.pdfDocument.xref,e,t)}ensureCatalog(e,t){return this.ensure(this.pdfDocument.catalog,e,t)}getPage(e){return this.pdfDocument.getPage(e)}fontFallback(e,t){return this.pdfDocument.fontFallback(e,t)}loadXfaFonts(e,t){return this.pdfDocument.loadXfaFonts(e,t)}loadXfaImages(){return this.pdfDocument.loadXfaImages()}serializeXfaData(e){return this.pdfDocument.serializeXfaData(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pdfDocument.cleanup(e)}async ensure(e,t,a){(0,r.unreachable)("Abstract method `ensure` called")}requestRange(e,t){(0,r.unreachable)("Abstract method `requestRange` called")}requestLoadedStream(){(0,r.unreachable)("Abstract method `requestLoadedStream` called")}sendProgressiveData(e){(0,r.unreachable)("Abstract method `sendProgressiveData` called")}updatePassword(e){this._password=e}terminate(e){(0,r.unreachable)("Abstract method `terminate` called")}}t.LocalPdfManager=class LocalPdfManager extends BasePdfManager{constructor(e){super(e);const t=new o.Stream(e.source);this.pdfDocument=new s.PDFDocument(this,t),this._loadedStreamPromise=Promise.resolve(t)}async ensure(e,t,a){const r=e[t];return"function"==typeof r?r.apply(e,a):r}requestRange(e,t){return Promise.resolve()}requestLoadedStream(){return this._loadedStreamPromise}terminate(e){}};t.NetworkPdfManager=class NetworkPdfManager extends BasePdfManager{constructor(e){super(e),this.streamManager=new n.ChunkedStreamManager(e.source,{msgHandler:e.handler,length:e.length,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize}),this.pdfDocument=new s.PDFDocument(this,this.streamManager.getStream())}async ensure(e,t,a){try{const r=e[t];return"function"==typeof r?r.apply(e,a):r}catch(r){if(!(r instanceof i.MissingDataException))throw r;return await this.requestRange(r.begin,r.end),this.ensure(e,t,a)}}requestRange(e,t){return this.streamManager.requestRange(e,t)}requestLoadedStream(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.streamManager.requestAllChunks(e)}sendProgressiveData(e){this.streamManager.onReceiveData({chunk:e})}terminate(e){this.streamManager.abort(e)}}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkedStreamManager=t.ChunkedStream=void 0,a(84),a(93),a(94),a(97),a(99),a(101),a(105),a(108),a(115),a(116),a(127),a(129),a(132),a(134),a(136),a(138),a(140),a(2);var r=a(150),n=a(145),i=a(155);class ChunkedStream extends i.Stream{constructor(e,t,a){super(new Uint8Array(e),0,e,null),this.chunkSize=t,this._loadedChunks=new Set,this.numChunks=Math.ceil(e/t),this.manager=a,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}getMissingChunks(){const e=[];for(let t=0,a=this.numChunks;t<a;++t)this._loadedChunks.has(t)||e.push(t);return e}get numChunksLoaded(){return this._loadedChunks.size}get isDataLoaded(){return this.numChunksLoaded===this.numChunks}onReceiveData(e,t){const a=this.chunkSize;if(e%a!=0)throw new Error(`Bad begin offset: ${e}`);const r=e+t.byteLength;if(r%a!=0&&r!==this.bytes.length)throw new Error(`Bad end offset: ${r}`);this.bytes.set(new Uint8Array(t),e);const n=Math.floor(e/a),i=Math.floor((r-1)/a)+1;for(let e=n;e<i;++e)this._loadedChunks.add(e)}onReceiveProgressiveData(e){let t=this.progressiveDataLength;const a=Math.floor(t/this.chunkSize);this.bytes.set(new Uint8Array(e),t),t+=e.byteLength,this.progressiveDataLength=t;const r=t>=this.end?this.numChunks:Math.floor(t/this.chunkSize);for(let e=a;e<r;++e)this._loadedChunks.add(e)}ensureByte(e){if(e<this.progressiveDataLength)return;const t=Math.floor(e/this.chunkSize);if(!(t>this.numChunks)&&t!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(t))throw new r.MissingDataException(e,e+1);this.lastSuccessfulEnsureByteChunk=t}}ensureRange(e,t){if(e>=t)return;if(t<=this.progressiveDataLength)return;const a=Math.floor(e/this.chunkSize);if(a>this.numChunks)return;const n=Math.min(Math.floor((t-1)/this.chunkSize)+1,this.numChunks);for(let i=a;i<n;++i)if(!this._loadedChunks.has(i))throw new r.MissingDataException(e,t)}nextEmptyChunk(e){const t=this.numChunks;for(let a=0;a<t;++a){const r=(e+a)%t;if(!this._loadedChunks.has(r))return r}return null}hasChunk(e){return this._loadedChunks.has(e)}getByte(){const e=this.pos;return e>=this.end?-1:(e>=this.progressiveDataLength&&this.ensureByte(e),this.bytes[this.pos++])}getBytes(e){const t=this.bytes,a=this.pos,r=this.end;if(!e)return r>this.progressiveDataLength&&this.ensureRange(a,r),t.subarray(a,r);let n=a+e;return n>r&&(n=r),n>this.progressiveDataLength&&this.ensureRange(a,n),this.pos=n,t.subarray(a,n)}getByteRange(e,t){return e<0&&(e=0),t>this.end&&(t=this.end),t>this.progressiveDataLength&&this.ensureRange(e,t),this.bytes.subarray(e,t)}makeSubStream(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function ChunkedStreamSubstream(){}t?e+t>this.progressiveDataLength&&this.ensureRange(e,e+t):e>=this.progressiveDataLength&&this.ensureByte(e),ChunkedStreamSubstream.prototype=Object.create(this),ChunkedStreamSubstream.prototype.getMissingChunks=function(){const e=this.chunkSize,t=Math.floor(this.start/e),a=Math.floor((this.end-1)/e)+1,r=[];for(let e=t;e<a;++e)this._loadedChunks.has(e)||r.push(e);return r},Object.defineProperty(ChunkedStreamSubstream.prototype,"isDataLoaded",{get(){return this.numChunksLoaded===this.numChunks||0===this.getMissingChunks().length},configurable:!0});const r=new ChunkedStreamSubstream;return r.pos=r.start=e,r.end=e+t||this.end,r.dict=a,r}getBaseStreams(){return[this]}}t.ChunkedStream=ChunkedStream;t.ChunkedStreamManager=class ChunkedStreamManager{constructor(e,t){this.length=t.length,this.chunkSize=t.rangeChunkSize,this.stream=new ChunkedStream(this.length,this.chunkSize,this),this.pdfNetworkStream=e,this.disableAutoFetch=t.disableAutoFetch,this.msgHandler=t.msgHandler,this.currRequestId=0,this._chunksNeededByRequest=new Map,this._requestsByChunk=new Map,this._promisesByRequest=new Map,this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=new n.PromiseCapability}sendRequest(e,t){const a=this.pdfNetworkStream.getRangeReader(e,t);a.isStreamingSupported||(a.onProgress=this.onProgress.bind(this));let n=[],i=0;return new Promise(((e,t)=>{const readChunk=s=>{let{value:o,done:c}=s;try{if(c){const t=(0,r.arrayBuffersToBytes)(n);return n=null,void e(t)}i+=o.byteLength,a.isStreamingSupported&&this.onProgress({loaded:i}),n.push(o),a.read().then(readChunk,t)}catch(e){t(e)}};a.read().then(readChunk,t)})).then((t=>{this.aborted||this.onReceiveData({chunk:t,begin:e})}))}requestAllChunks(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){const e=this.stream.getMissingChunks();this._requestChunks(e)}return this._loadedStreamCapability.promise}_requestChunks(e){const t=this.currRequestId++,a=new Set;this._chunksNeededByRequest.set(t,a);for(const t of e)this.stream.hasChunk(t)||a.add(t);if(0===a.size)return Promise.resolve();const r=new n.PromiseCapability;this._promisesByRequest.set(t,r);const i=[];for(const e of a){let a=this._requestsByChunk.get(e);a||(a=[],this._requestsByChunk.set(e,a),i.push(e)),a.push(t)}if(i.length>0){const e=this.groupChunks(i);for(const t of e){const e=t.beginChunk*this.chunkSize,a=Math.min(t.endChunk*this.chunkSize,this.length);this.sendRequest(e,a).catch(r.reject)}}return r.promise.catch((e=>{if(!this.aborted)throw e}))}getStream(){return this.stream}requestRange(e,t){t=Math.min(t,this.length);const a=this.getBeginChunk(e),r=this.getEndChunk(t),n=[];for(let e=a;e<r;++e)n.push(e);return this._requestChunks(n)}requestRanges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];for(const a of e){const e=this.getBeginChunk(a.begin),r=this.getEndChunk(a.end);for(let a=e;a<r;++a)t.includes(a)||t.push(a)}return t.sort((function(e,t){return e-t})),this._requestChunks(t)}groupChunks(e){const t=[];let a=-1,r=-1;for(let n=0,i=e.length;n<i;++n){const i=e[n];a<0&&(a=i),r>=0&&r+1!==i&&(t.push({beginChunk:a,endChunk:r+1}),a=i),n+1===e.length&&t.push({beginChunk:a,endChunk:i+1}),r=i}return t}onProgress(e){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+e.loaded,total:this.length})}onReceiveData(e){const t=e.chunk,a=void 0===e.begin,r=a?this.progressiveDataLength:e.begin,n=r+t.byteLength,i=Math.floor(r/this.chunkSize),s=n<this.length?Math.floor(n/this.chunkSize):Math.ceil(n/this.chunkSize);a?(this.stream.onReceiveProgressiveData(t),this.progressiveDataLength=n):this.stream.onReceiveData(r,t),this.stream.isDataLoaded&&this._loadedStreamCapability.resolve(this.stream);const o=[];for(let e=i;e<s;++e){const t=this._requestsByChunk.get(e);if(t){this._requestsByChunk.delete(e);for(const a of t){const t=this._chunksNeededByRequest.get(a);t.has(e)&&t.delete(e),t.size>0||o.push(a)}}}if(!this.disableAutoFetch&&0===this._requestsByChunk.size){let e;if(1===this.stream.numChunksLoaded){const t=this.stream.numChunks-1;this.stream.hasChunk(t)||(e=t)}else e=this.stream.nextEmptyChunk(s);Number.isInteger(e)&&this._requestChunks([e])}for(const e of o){const t=this._promisesByRequest.get(e);this._promisesByRequest.delete(e),t.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}onError(e){this._loadedStreamCapability.reject(e)}getBeginChunk(e){return Math.floor(e/this.chunkSize)}getEndChunk(e){return Math.floor((e-1)/this.chunkSize)+1}abort(e){this.aborted=!0,this.pdfNetworkStream?.cancelAllRequests(e);for(const t of this._promisesByRequest.values())t.reject(e)}}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StringStream=t.Stream=t.NullStream=void 0,a(84),a(93),a(94),a(97),a(99),a(101),a(105),a(108),a(115);var r=a(152),n=a(145);class Stream extends r.BaseStream{constructor(e,t,a,r){super(),this.bytes=e instanceof Uint8Array?e:new Uint8Array(e),this.start=t||0,this.pos=this.start,this.end=t+a||this.bytes.length,this.dict=r}get length(){return this.end-this.start}get isEmpty(){return 0===this.length}getByte(){return this.pos>=this.end?-1:this.bytes[this.pos++]}getBytes(e){const t=this.bytes,a=this.pos,r=this.end;if(!e)return t.subarray(a,r);let n=a+e;return n>r&&(n=r),this.pos=n,t.subarray(a,n)}getByteRange(e,t){return e<0&&(e=0),t>this.end&&(t=this.end),this.bytes.subarray(e,t)}reset(){this.pos=this.start}moveStart(){this.start=this.pos}makeSubStream(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Stream(this.bytes.buffer,e,t,a)}}t.Stream=Stream;t.StringStream=class StringStream extends Stream{constructor(e){super((0,n.stringToBytes)(e))}};t.NullStream=class NullStream extends Stream{constructor(){super(new Uint8Array(0))}}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Page=t.PDFDocument=void 0,a(2),a(140),a(116),a(127),a(129),a(132),a(134),a(136),a(138),a(84),a(93),a(94),a(97),a(99),a(101),a(105),a(108),a(115);var r=a(145),n=a(157),i=a(150),s=a(151),o=a(202),c=a(152),l=a(225),h=a(217),u=a(219),d=a(256),f=a(167),g=a(155),p=a(227),m=a(215),b=a(164),y=a(169),w=a(223),S=a(224),x=a(228),C=a(257);const v=[0,0,612,792];class Page{constructor(e){let{pdfManager:t,xref:a,pageIndex:r,pageDict:n,ref:i,globalIdFactory:s,fontCache:o,builtInCMapCache:c,standardFontDataCache:l,globalImageCache:h,systemFontCache:u,nonBlendModesSet:d,xfaFactory:f}=e;this.pdfManager=t,this.pageIndex=r,this.pageDict=n,this.xref=a,this.ref=i,this.fontCache=o,this.builtInCMapCache=c,this.standardFontDataCache=l,this.globalImageCache=h,this.systemFontCache=u,this.nonBlendModesSet=d,this.evaluatorOptions=t.evaluatorOptions,this.resourcesPromise=null,this.xfaFactory=f;const g={obj:0};this._localIdFactory=class extends s{static createObjId(){return`p${r}_${++g.obj}`}static getPageObjId(){return`p${i.toString()}`}}}_getInheritableProperty(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=(0,i.getInheritableProperty)({dict:this.pageDict,key:e,getArray:t,stopWhenFound:!1});return Array.isArray(a)?1!==a.length&&a[0]instanceof s.Dict?s.Dict.merge({xref:this.xref,dictArray:a}):a[0]:a}get content(){return this.pageDict.getArray("Contents")}get resources(){const e=this._getInheritableProperty("Resources");return(0,r.shadow)(this,"resources",e instanceof s.Dict?e:s.Dict.empty)}_getBoundingBox(e){if(this.xfaData)return this.xfaData.bbox;let t=this._getInheritableProperty(e,!0);if(Array.isArray(t)&&4===t.length){if(t=r.Util.normalizeRect(t),t[2]-t[0]>0&&t[3]-t[1]>0)return t;(0,r.warn)(`Empty, or invalid, /${e} entry.`)}return null}get mediaBox(){return(0,r.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||v)}get cropBox(){return(0,r.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}get userUnit(){let e=this.pageDict.get("UserUnit");return("number"!=typeof e||e<=0)&&(e=1),(0,r.shadow)(this,"userUnit",e)}get view(){const{cropBox:e,mediaBox:t}=this;if(e!==t&&!(0,r.isArrayEqual)(e,t)){const a=r.Util.intersect(e,t);if(a&&a[2]-a[0]>0&&a[3]-a[1]>0)return(0,r.shadow)(this,"view",a);(0,r.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,r.shadow)(this,"view",t)}get rotate(){let e=this._getInheritableProperty("Rotate")||0;return e%90!=0?e=0:e>=360?e%=360:e<0&&(e=(e%360+360)%360),(0,r.shadow)(this,"rotate",e)}_onSubStreamError(e,t){if(!this.evaluatorOptions.ignoreErrors)throw e;(0,r.warn)(`getContentStream - ignoring sub-stream (${t}): "${e}".`)}getContentStream(){return this.pdfManager.ensure(this,"content").then((e=>e instanceof c.BaseStream?e:Array.isArray(e)?new y.StreamsSequenceStream(e,this._onSubStreamError.bind(this)):new g.NullStream))}get xfaData(){return(0,r.shadow)(this,"xfaData",this.xfaFactory?{bbox:this.xfaFactory.getBoundingBox(this.pageIndex)}:null)}#t(e,t,a){for(const n of e)if(n.id){const e=s.Ref.fromString(n.id);if(!e){(0,r.warn)(`A non-linked annotation cannot be modified: ${n.id}`);continue}if(n.deleted){t.put(e);continue}a?.put(e),n.ref=e,delete n.id}}async saveNewAnnotations(e,t,a,r){if(this.xfaFactory)throw new Error("XFA: Cannot save new annotations.");const i=new b.PartialEvaluator({xref:this.xref,handler:e,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}),o=new s.RefSet,c=new s.RefSet;this.#t(a,o,c);const l=this.pageDict,h=this.annotations.filter((e=>!(e instanceof s.Ref&&o.has(e)))),u=await n.AnnotationFactory.saveNewAnnotations(i,t,a,r);for(const{ref:e}of u.annotations)e instanceof s.Ref&&!c.has(e)&&h.push(e);const d=l.get("Annots");l.set("Annots",h);const f=[];await(0,S.writeObject)(this.ref,l,f,this.xref),d&&l.set("Annots",d);const g=u.dependencies;return g.push({ref:this.ref,data:f.join("")},...u.annotations),g}save(e,t,a){const n=new b.PartialEvaluator({xref:this.xref,handler:e,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions});return this._parsedAnnotations.then((function(e){const i=[];for(const s of e)s.mustBePrinted(a)&&i.push(s.save(n,t,a).catch((function(e){return(0,r.warn)(`save - ignoring annotation data during "${t.name}" task: "${e}".`),null})));return Promise.all(i).then((function(e){return e.filter((e=>!!e))}))}))}loadResources(e){return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then((()=>new p.ObjectLoader(this.resources,e,this.xref).load()))}getOperatorList(e){let{handler:t,sink:a,task:o,intent:c,cacheKey:l,annotationStorage:h=null}=e;const u=this.getContentStream(),d=this.loadResources(["ColorSpace","ExtGState","Font","Pattern","Properties","Shading","XObject"]),f=new b.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}),g=this.xfaFactory?null:(0,i.getNewAnnotationsMap)(h);let p=null,y=Promise.resolve(null);if(g){const e=g.get(this.pageIndex);if(e){const t=this.pdfManager.ensureDoc("annotationGlobals");let a;const i=new Set;for(const{bitmapId:t,bitmap:a}of e)!t||a||i.has(t)||i.add(t);const{isOffscreenCanvasSupported:c}=this.evaluatorOptions;if(i.size>0){const t=e.slice();for(const[e,a]of h)e.startsWith(r.AnnotationEditorPrefix)&&a.bitmap&&i.has(a.bitmapId)&&t.push(a);a=n.AnnotationFactory.generateImages(t,this.xref,c)}else a=n.AnnotationFactory.generateImages(e,this.xref,c);p=new s.RefSet,this.#t(e,p,null),y=t.then((t=>t?n.AnnotationFactory.printNewAnnotations(t,f,o,e,a):null))}}const w=Promise.all([u,d]).then((e=>{let[r]=e;const n=new m.OperatorList(c,a);return t.send("StartRenderPage",{transparency:f.hasBlendModes(this.resources,this.nonBlendModesSet),pageIndex:this.pageIndex,cacheKey:l}),f.getOperatorList({stream:r,task:o,resources:this.resources,operatorList:n}).then((function(){return n}))}));return Promise.all([w,this._parsedAnnotations,y]).then((function(e){let[t,a,n]=e;if(n){a=a.filter((e=>!(e.ref&&p.has(e.ref))));for(let e=0,t=n.length;e<t;e++){const r=n[e];if(r.refToReplace){const i=a.findIndex((e=>e.ref&&(0,s.isRefsEqual)(e.ref,r.refToReplace)));i>=0&&(a.splice(i,1,r),n.splice(e--,1),t--)}}a=a.concat(n)}if(0===a.length||c&r.RenderingIntentFlag.ANNOTATIONS_DISABLE)return t.flush(!0),{length:t.totalLength};const i=!!(c&r.RenderingIntentFlag.ANNOTATIONS_FORMS),l=!!(c&r.RenderingIntentFlag.ANY),u=!!(c&r.RenderingIntentFlag.DISPLAY),d=!!(c&r.RenderingIntentFlag.PRINT),g=[];for(const e of a)(l||u&&e.mustBeViewed(h,i)||d&&e.mustBePrinted(h))&&g.push(e.getOperatorList(f,o,c,i,h).catch((function(e){return(0,r.warn)(`getOperatorList - ignoring annotation data during "${o.name}" task: "${e}".`),{opList:null,separateForm:!1,separateCanvas:!1}})));return Promise.all(g).then((function(e){let a=!1,r=!1;for(const{opList:n,separateForm:i,separateCanvas:s}of e)t.addOpList(n),a||=i,r||=s;return t.flush(!0,{form:a,canvas:r}),{length:t.totalLength}}))}))}extractTextContent(e){let{handler:t,task:a,includeMarkedContent:r,disableNormalization:n,sink:i}=e;const s=this.getContentStream(),o=this.loadResources(["ExtGState","Font","Properties","XObject"]);return Promise.all([s,o]).then((e=>{let[s]=e;return new b.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}).getTextContent({stream:s,task:a,resources:this.resources,includeMarkedContent:r,disableNormalization:n,sink:i,viewBox:this.view})}))}async getStructTree(){const e=await this.pdfManager.ensureCatalog("structTreeRoot");if(!e)return null;await this._parsedAnnotations;return(await this.pdfManager.ensure(this,"_parseStructTree",[e])).serializable}_parseStructTree(e){const t=new w.StructTreePage(e,this.pageDict);return t.parse(this.ref),t}async getAnnotationsData(e,t,a){const n=await this._parsedAnnotations;if(0===n.length)return n;const i=[],s=[];let o;const c=!!(a&r.RenderingIntentFlag.ANY),l=!!(a&r.RenderingIntentFlag.DISPLAY),h=!!(a&r.RenderingIntentFlag.PRINT);for(const a of n){const n=c||l&&a.viewable;(n||h&&a.printable)&&i.push(a.data),a.hasTextContent&&n&&(o||=new b.PartialEvaluator({xref:this.xref,handler:e,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}),s.push(a.extractTextContent(o,t,[-1/0,-1/0,1/0,1/0]).catch((function(e){(0,r.warn)(`getAnnotationsData - ignoring textContent during "${t.name}" task: "${e}".`)}))))}return await Promise.all(s),i}get annotations(){const e=this._getInheritableProperty("Annots");return(0,r.shadow)(this,"annotations",Array.isArray(e)?e:[])}get _parsedAnnotations(){const e=this.pdfManager.ensure(this,"annotations").then((async e=>{if(0===e.length)return e;const t=await this.pdfManager.ensureDoc("annotationGlobals");if(!t)return[];const a=[];for(const i of e)a.push(n.AnnotationFactory.create(this.xref,i,t,this._localIdFactory,!1,this.ref).catch((function(e){return(0,r.warn)(`_parsedAnnotations: "${e}".`),null})));const i=[];let s;for(const e of await Promise.all(a))e&&(e instanceof n.PopupAnnotation?(s||=[]).push(e):i.push(e));return s&&i.push(...s),i}));return(0,r.shadow)(this,"_parsedAnnotations",e)}get jsActions(){const e=(0,i.collectActions)(this.xref,this.pageDict,r.PageActionEventType);return(0,r.shadow)(this,"jsActions",e)}}t.Page=Page;const k=new Uint8Array([37,80,68,70,45]),O=new Uint8Array([115,116,97,114,116,120,114,101,102]),T=new Uint8Array([101,110,100,111,98,106]);function find(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=t.length,i=e.peekBytes(a),s=i.length-n;if(s<=0)return!1;if(r){const a=n-1;let r=i.length-1;for(;r>=a;){let s=0;for(;s<n&&i[r-s]===t[a-s];)s++;if(s>=n)return e.pos+=r-a,!0;r--}}else{let a=0;for(;a<=s;){let r=0;for(;r<n&&i[a+r]===t[r];)r++;if(r>=n)return e.pos+=a,!0;a++}}return!1}t.PDFDocument=class PDFDocument{constructor(e,t){if(t.length<=0)throw new r.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=e,this.stream=t,this.xref=new C.XRef(t,e),this._pagePromises=new Map,this._version=null;const a={font:0};this._globalIdFactory=class{static getDocId(){return`g_${e.docId}`}static createFontId(){return"f"+ ++a.font}static createObjId(){(0,r.unreachable)("Abstract method `createObjId` called.")}static getPageObjId(){(0,r.unreachable)("Abstract method `getPageObjId` called.")}}}parse(e){this.xref.parse(e),this.catalog=new h.Catalog(this.pdfManager,this.xref)}get linearization(){let e=null;try{e=f.Linearization.create(this.stream)}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.info)(e)}return(0,r.shadow)(this,"linearization",e)}get startXRef(){const e=this.stream;let t=0;if(this.linearization)e.reset(),find(e,T)&&(t=e.pos+6-e.start);else{const a=1024,r=O.length;let n=!1,s=e.end;for(;!n&&s>0;)s-=a-r,s<0&&(s=0),e.pos=s,n=find(e,O,a,!0);if(n){let a;e.skip(9);do{a=e.getByte()}while((0,i.isWhiteSpace)(a));let r="";for(;a>=32&&a<=57;)r+=String.fromCharCode(a),a=e.getByte();t=parseInt(r,10),isNaN(t)&&(t=0)}}return(0,r.shadow)(this,"startXRef",t)}checkHeader(){const e=this.stream;if(e.reset(),!find(e,k))return;e.moveStart(),e.skip(k.length);let t,a="";for(;(t=e.getByte())>32&&a.length<7;)a+=String.fromCharCode(t);i.PDF_VERSION_REGEXP.test(a)?this._version=a:(0,r.warn)(`Invalid PDF header version: ${a}`)}parseStartXRef(){this.xref.setStartXRef(this.startXRef)}get numPages(){let e=0;return e=this.catalog.hasActualNumPages?this.catalog.numPages:this.xfaFactory?this.xfaFactory.getNumPages():this.linearization?this.linearization.numPages:this.catalog.numPages,(0,r.shadow)(this,"numPages",e)}_hasOnlyDocumentSignatures(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!Array.isArray(e)&&e.every((e=>{if(!((e=this.xref.fetchIfRef(e))instanceof s.Dict))return!1;if(e.has("Kids"))return++t>10?((0,r.warn)("_hasOnlyDocumentSignatures: maximum recursion depth reached"),!1):this._hasOnlyDocumentSignatures(e.get("Kids"),t);const a=(0,s.isName)(e.get("FT"),"Sig"),n=e.get("Rect"),i=Array.isArray(n)&&n.every((e=>0===e));return a&&i}))}get _xfaStreams(){const e=this.catalog.acroForm;if(!e)return null;const t=e.get("XFA"),a={"xdp:xdp":"",template:"",datasets:"",config:"",connectionSet:"",localeSet:"",stylesheet:"","/xdp:xdp":""};if(t instanceof c.BaseStream&&!t.isEmpty)return a["xdp:xdp"]=t,a;if(!Array.isArray(t)||0===t.length)return null;for(let e=0,r=t.length;e<r;e+=2){let n;if(n=0===e?"xdp:xdp":e===r-2?"/xdp:xdp":t[e],!a.hasOwnProperty(n))continue;const i=this.xref.fetchIfRef(t[e+1]);i instanceof c.BaseStream&&!i.isEmpty&&(a[n]=i)}return a}get xfaDatasets(){const e=this._xfaStreams;if(!e)return(0,r.shadow)(this,"xfaDatasets",null);for(const t of["datasets","xdp:xdp"]){const a=e[t];if(a)try{const e={[t]:(0,r.stringToUTF8String)(a.getString())};return(0,r.shadow)(this,"xfaDatasets",new d.DatasetReader(e))}catch{(0,r.warn)("XFA - Invalid utf-8 string.");break}}return(0,r.shadow)(this,"xfaDatasets",null)}get xfaData(){const e=this._xfaStreams;if(!e)return null;const t=Object.create(null);for(const[a,n]of Object.entries(e))if(n)try{t[a]=(0,r.stringToUTF8String)(n.getString())}catch{return(0,r.warn)("XFA - Invalid utf-8 string."),null}return t}get xfaFactory(){let e;return this.pdfManager.enableXfa&&this.catalog.needsRendering&&this.formInfo.hasXfa&&!this.formInfo.hasAcroForm&&(e=this.xfaData),(0,r.shadow)(this,"xfaFactory",e?new x.XFAFactory(e):null)}get isPureXfa(){return!!this.xfaFactory&&this.xfaFactory.isValid()}get htmlForXfa(){return this.xfaFactory?this.xfaFactory.getPages():null}async loadXfaImages(){const e=await this.pdfManager.ensureCatalog("xfaImages");if(!e)return;const t=e.getKeys(),a=new p.ObjectLoader(e,t,this.xref);await a.load();const r=new Map;for(const a of t){const t=e.get(a);t instanceof c.BaseStream&&r.set(a,t.getBytes())}this.xfaFactory.setImages(r)}async loadXfaFonts(e,t){const a=await this.pdfManager.ensureCatalog("acroForm");if(!a)return;const n=await a.getAsync("DR");if(!(n instanceof s.Dict))return;const c=new p.ObjectLoader(n,["Font"],this.xref);await c.load();const l=n.get("Font");if(!(l instanceof s.Dict))return;const h=Object.assign(Object.create(null),this.pdfManager.evaluatorOptions);h.useSystemFonts=!1;const u=new b.PartialEvaluator({xref:this.xref,handler:e,pageIndex:-1,idFactory:this._globalIdFactory,fontCache:this.catalog.fontCache,builtInCMapCache:this.catalog.builtInCMapCache,standardFontDataCache:this.catalog.standardFontDataCache,options:h}),d=new m.OperatorList,f=[],g={get font(){return f.at(-1)},set font(e){f.push(e)},clone(){return this}},y=new Map;l.forEach(((e,t)=>{y.set(e,t)}));const w=[];for(const[e,a]of y){const o=a.get("FontDescriptor");if(!(o instanceof s.Dict))continue;let c=o.get("FontFamily");c=c.replaceAll(/[ ]+(\d)/g,"$1");const l={fontFamily:c,fontWeight:o.get("FontWeight"),italicAngle:-o.get("ItalicAngle")};(0,i.validateCSSFont)(l)&&w.push(u.handleSetFont(n,[s.Name.get(e),1],null,d,t,g,null,l).catch((function(e){return(0,r.warn)(`loadXfaFonts: "${e}".`),null})))}await Promise.all(w);const S=this.xfaFactory.setFonts(f);if(!S)return;h.ignoreErrors=!0,w.length=0,f.length=0;const x=new Set;for(const e of S)(0,o.getXfaFontName)(`${e}-Regular`)||x.add(e);x.size&&S.push("PdfJS-Fallback");for(const e of S)if(!x.has(e))for(const a of[{name:"Regular",fontWeight:400,italicAngle:0},{name:"Bold",fontWeight:700,italicAngle:0},{name:"Italic",fontWeight:400,italicAngle:12},{name:"BoldItalic",fontWeight:700,italicAngle:12}]){const i=`${e}-${a.name}`,c=(0,o.getXfaFontDict)(i);w.push(u.handleSetFont(n,[s.Name.get(i),1],null,d,t,g,c,{fontFamily:e,fontWeight:a.fontWeight,italicAngle:a.italicAngle}).catch((function(e){return(0,r.warn)(`loadXfaFonts: "${e}".`),null})))}await Promise.all(w),this.xfaFactory.appendFonts(f,x)}async serializeXfaData(e){return this.xfaFactory?this.xfaFactory.serializeData(e):null}get version(){return this.catalog.version||this._version}get formInfo(){const e={hasFields:!1,hasAcroForm:!1,hasXfa:!1,hasSignatures:!1},t=this.catalog.acroForm;if(!t)return(0,r.shadow)(this,"formInfo",e);try{const a=t.get("Fields"),r=Array.isArray(a)&&a.length>0;e.hasFields=r;const n=t.get("XFA");e.hasXfa=Array.isArray(n)&&n.length>0||n instanceof c.BaseStream&&!n.isEmpty;const i=!!(1&t.get("SigFlags")),s=i&&this._hasOnlyDocumentSignatures(a);e.hasAcroForm=r&&!s,e.hasSignatures=i}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.warn)(`Cannot fetch form information: "${e}".`)}return(0,r.shadow)(this,"formInfo",e)}get documentInfo(){const e={PDFFormatVersion:this.version,Language:this.catalog.lang,EncryptFilterName:this.xref.encrypt?this.xref.encrypt.filterName:null,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection,IsSignaturesPresent:this.formInfo.hasSignatures};let t;try{t=this.xref.trailer.get("Info")}catch(e){if(e instanceof i.MissingDataException)throw e;(0,r.info)("The document information dictionary is invalid.")}if(!(t instanceof s.Dict))return(0,r.shadow)(this,"documentInfo",e);for(const a of t.getKeys()){const n=t.get(a);switch(a){case"Title":case"Author":case"Subject":case"Keywords":case"Creator":case"Producer":case"CreationDate":case"ModDate":if("string"==typeof n){e[a]=(0,r.stringToPDFString)(n);continue}break;case"Trapped":if(n instanceof s.Name){e[a]=n;continue}break;default:let t;switch(typeof n){case"string":t=(0,r.stringToPDFString)(n);break;case"number":case"boolean":t=n;break;default:n instanceof s.Name&&(t=n)}if(void 0===t){(0,r.warn)(`Bad value, for custom key "${a}", in Info: ${n}.`);continue}e.Custom||(e.Custom=Object.create(null)),e.Custom[a]=t;continue}(0,r.warn)(`Bad value, for key "${a}", in Info: ${n}.`)}return(0,r.shadow)(this,"documentInfo",e)}get fingerprints(){function validate(e){return"string"==typeof e&&e.length>0&&"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"!==e}function hexString(e){const t=[];for(const a of e){const e=a.toString(16);t.push(e.padStart(2,"0"))}return t.join("")}const e=this.xref.trailer.get("ID");let t,a;return Array.isArray(e)&&validate(e[0])?(t=(0,r.stringToBytes)(e[0]),e[1]!==e[0]&&validate(e[1])&&(a=(0,r.stringToBytes)(e[1]))):t=(0,l.calculateMD5)(this.stream.getByteRange(0,1024),0,1024),(0,r.shadow)(this,"fingerprints",[hexString(t),a?hexString(a):null])}async _getLinearizationPage(e){const{catalog:t,linearization:a,xref:n}=this,i=s.Ref.get(a.objectNumberFirst,0);try{const e=await n.fetchAsync(i);if(e instanceof s.Dict){let a=e.getRaw("Type");if(a instanceof s.Ref&&(a=await n.fetchAsync(a)),(0,s.isName)(a,"Page")||!e.has("Type")&&!e.has("Kids"))return t.pageKidsCountCache.has(i)||t.pageKidsCountCache.put(i,1),t.pageIndexCache.has(i)||t.pageIndexCache.put(i,0),[e,i]}throw new r.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")}catch(a){return(0,r.warn)(`_getLinearizationPage: "${a.message}".`),t.getPageDict(e)}}getPage(e){const t=this._pagePromises.get(e);if(t)return t;const{catalog:a,linearization:r,xfaFactory:n}=this;let i;return i=n?Promise.resolve([s.Dict.empty,null]):r?.pageFirst===e?this._getLinearizationPage(e):a.getPageDict(e),i=i.then((t=>{let[r,i]=t;return new Page({pdfManager:this.pdfManager,xref:this.xref,pageIndex:e,pageDict:r,ref:i,globalIdFactory:this._globalIdFactory,fontCache:a.fontCache,builtInCMapCache:a.builtInCMapCache,standardFontDataCache:a.standardFontDataCache,globalImageCache:a.globalImageCache,systemFontCache:a.systemFontCache,nonBlendModesSet:a.nonBlendModesSet,xfaFactory:n})})),this._pagePromises.set(e,i),i}async checkFirstPage(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))try{await this.getPage(0)}catch(e){if(e instanceof i.XRefEntryException)throw this._pagePromises.delete(0),await this.cleanup(),new i.XRefParseException}}async checkLastPage(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{catalog:t,pdfManager:a}=this;let n;t.setActualNumPages();try{if(await Promise.all([a.ensureDoc("xfaFactory"),a.ensureDoc("linearization"),a.ensureCatalog("numPages")]),this.xfaFactory)return;if(n=this.linearization?this.linearization.numPages:t.numPages,!Number.isInteger(n))throw new r.FormatError("Page count is not an integer.");if(n<=1)return;await this.getPage(n-1)}catch(s){if(this._pagePromises.delete(n-1),await this.cleanup(),s instanceof i.XRefEntryException&&!e)throw new i.XRefParseException;let o;(0,r.warn)(`checkLastPage - invalid /Pages tree /Count: ${n}.`);try{o=await t.getAllPageDicts(e)}catch(a){if(a instanceof i.XRefEntryException&&!e)throw new i.XRefParseException;return void t.setActualNumPages(1)}for(const[e,[r,n]]of o){let i;r instanceof Error?(i=Promise.reject(r),i.catch((()=>{}))):i=Promise.resolve(new Page({pdfManager:a,xref:this.xref,pageIndex:e,pageDict:r,ref:n,globalIdFactory:this._globalIdFactory,fontCache:t.fontCache,builtInCMapCache:t.builtInCMapCache,standardFontDataCache:t.standardFontDataCache,globalImageCache:t.globalImageCache,systemFontCache:t.systemFontCache,nonBlendModesSet:t.nonBlendModesSet,xfaFactory:null})),this._pagePromises.set(e,i)}t.setActualNumPages(o.size)}}fontFallback(e,t){return this.catalog.fontFallback(e,t)}async cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.catalog?this.catalog.cleanup(e):(0,u.clearGlobalCaches)()}#a(e,t,a,i){const s=this.xref.fetchIfRef(t);if(s.has("T")){const t=(0,r.stringToPDFString)(s.get("T"));e=""===e?t:`${e}.${t}`}if(a.has(e)||a.set(e,[]),a.get(e).push(n.AnnotationFactory.create(this.xref,t,i,this._localIdFactory,!0,null).then((e=>e?.getFieldObject())).catch((function(e){return(0,r.warn)(`#collectFieldObjects: "${e}".`),null}))),s.has("Kids"))for(const t of s.get("Kids"))this.#a(e,t,a,i)}get fieldObjects(){if(!this.formInfo.hasFields)return(0,r.shadow)(this,"fieldObjects",Promise.resolve(null));const e=this.pdfManager.ensureDoc("annotationGlobals").then((async e=>{if(!e)return null;const t=Object.create(null),a=new Map;for(const t of this.catalog.acroForm.get("Fields"))this.#a("",t,a,e);const r=[];for(const[e,n]of a)r.push(Promise.all(n).then((a=>{(a=a.filter((e=>!!e))).length>0&&(t[e]=a)})));return await Promise.all(r),t}));return(0,r.shadow)(this,"fieldObjects",e)}get hasJSActions(){const e=this.pdfManager.ensureDoc("_parseHasJSActions");return(0,r.shadow)(this,"hasJSActions",e)}async _parseHasJSActions(){const[e,t]=await Promise.all([this.pdfManager.ensureCatalog("jsActions"),this.pdfManager.ensureDoc("fieldObjects")]);return!!e||!!t&&Object.values(t).some((e=>e.some((e=>null!==e.actions))))}get calculationOrderIds(){const e=this.catalog.acroForm;if(!e?.has("CO"))return(0,r.shadow)(this,"calculationOrderIds",null);const t=e.get("CO");if(!Array.isArray(t)||0===t.length)return(0,r.shadow)(this,"calculationOrderIds",null);const a=[];for(const e of t)e instanceof s.Ref&&a.push(e.toString());return 0===a.length?(0,r.shadow)(this,"calculationOrderIds",null):(0,r.shadow)(this,"calculationOrderIds",a)}get annotationGlobals(){return(0,r.shadow)(this,"annotationGlobals",n.AnnotationFactory.createGlobals(this.pdfManager))}}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PopupAnnotation=t.MarkupAnnotation=t.AnnotationFactory=t.AnnotationBorderStyle=t.Annotation=void 0,t.getQuadPoints=getQuadPoints,a(140),a(84),a(93),a(94),a(97),a(99),a(101),a(105),a(108),a(115),a(158),a(160);var r=a(145),n=a(150),i=a(162),s=a(151),o=a(155),c=a(152),l=a(211),h=a(217),u=a(163),d=a(220),f=a(177),g=a(227),p=a(215),m=a(224),b=a(228);function getRgbColor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint8ClampedArray(3);if(!Array.isArray(e))return t;const a=t||new Uint8ClampedArray(3);switch(e.length){case 0:return null;case 1:return u.ColorSpace.singletons.gray.getRgbItem(e,0,a,0),a;case 3:return u.ColorSpace.singletons.rgb.getRgbItem(e,0,a,0),a;case 4:return u.ColorSpace.singletons.cmyk.getRgbItem(e,0,a,0),a;default:return t}}function getPdfColorArray(e){return Array.from(e,(e=>e/255))}function getQuadPoints(e,t){const a=e.getArray("QuadPoints");if(!Array.isArray(a)||0===a.length||a.length%8>0)return null;const r=[];for(let e=0,n=a.length/8;e<n;e++){let n=1/0,i=-1/0,s=1/0,o=-1/0;for(let t=8*e,r=8*e+8;t<r;t+=2){const e=a[t],r=a[t+1];n=Math.min(e,n),i=Math.max(e,i),s=Math.min(r,s),o=Math.max(r,o)}if(null!==t&&(n<t[0]||i>t[2]||s<t[1]||o>t[3]))return null;r.push([{x:n,y:o},{x:i,y:o},{x:n,y:s},{x:i,y:s}])}return r}function getTransformMatrix(e,t,a){const[n,i,s,o]=r.Util.getAxialAlignedBoundingBox(t,a);if(n===s||i===o)return[1,0,0,1,e[0],e[1]];const c=(e[2]-e[0])/(s-n),l=(e[3]-e[1])/(o-i);return[c,0,0,l,e[0]-n*c,e[1]-i*l]}t.AnnotationFactory=class AnnotationFactory{static createGlobals(e){return Promise.all([e.ensureCatalog("acroForm"),e.ensureDoc("xfaDatasets"),e.ensureCatalog("structTreeRoot"),e.ensureCatalog("baseUrl"),e.ensureCatalog("attachments")]).then((t=>{let[a,r,n,i,o]=t;return{pdfManager:e,acroForm:a instanceof s.Dict?a:s.Dict.empty,xfaDatasets:r,structTreeRoot:n,baseUrl:i,attachments:o}}),(e=>((0,r.warn)(`createGlobals: "${e}".`),null)))}static async create(e,t,a,r,n,i){const s=n?await this._getPageIndex(e,t,a.pdfManager):null;return a.pdfManager.ensure(this,"_create",[e,t,a,r,n,s,i])}static _create(e,t,a,i){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const h=e.fetchIfRef(t);if(!(h instanceof s.Dict))return;const{acroForm:u,pdfManager:d}=a,f=t instanceof s.Ref?t.toString():`annot_${i.createObjId()}`;let g=h.get("Subtype");g=g instanceof s.Name?g.name:null;const p={xref:e,ref:t,dict:h,subtype:g,id:f,annotationGlobals:a,collectFields:o,needAppearances:!o&&!0===u.get("NeedAppearances"),pageIndex:c,evaluatorOptions:d.evaluatorOptions,pageRef:l};switch(g){case"Link":return new LinkAnnotation(p);case"Text":return new TextAnnotation(p);case"Widget":let e=(0,n.getInheritableProperty)({dict:h,key:"FT"});switch(e=e instanceof s.Name?e.name:null,e){case"Tx":return new TextWidgetAnnotation(p);case"Btn":return new ButtonWidgetAnnotation(p);case"Ch":return new ChoiceWidgetAnnotation(p);case"Sig":return new SignatureWidgetAnnotation(p)}return(0,r.warn)(`Unimplemented widget field type "${e}", falling back to base field type.`),new WidgetAnnotation(p);case"Popup":return new PopupAnnotation(p);case"FreeText":return new FreeTextAnnotation(p);case"Line":return new LineAnnotation(p);case"Square":return new SquareAnnotation(p);case"Circle":return new CircleAnnotation(p);case"PolyLine":return new PolylineAnnotation(p);case"Polygon":return new PolygonAnnotation(p);case"Caret":return new CaretAnnotation(p);case"Ink":return new InkAnnotation(p);case"Highlight":return new HighlightAnnotation(p);case"Underline":return new UnderlineAnnotation(p);case"Squiggly":return new SquigglyAnnotation(p);case"StrikeOut":return new StrikeOutAnnotation(p);case"Stamp":return new StampAnnotation(p);case"FileAttachment":return new FileAttachmentAnnotation(p);default:return o||(g?(0,r.warn)(`Unimplemented annotation type "${g}", falling back to base annotation.`):(0,r.warn)("Annotation is missing the required /Subtype.")),new Annotation(p)}}static async _getPageIndex(e,t,a){try{const n=await e.fetchIfRefAsync(t);if(!(n instanceof s.Dict))return-1;const i=n.getRaw("P");if(i instanceof s.Ref)try{return await a.ensureCatalog("getPageIndex",[i])}catch(e){(0,r.info)(`_getPageIndex -- not a valid page reference: "${e}".`)}if(n.has("Kids"))return-1;const o=await a.ensureDoc("numPages");for(let e=0;e<o;e++){const r=await a.getPage(e),n=await a.ensure(r,"annotations");for(const a of n)if(a instanceof s.Ref&&(0,s.isRefsEqual)(a,t))return e}}catch(e){(0,r.warn)(`_getPageIndex: "${e}".`)}return-1}static generateImages(e,t,a){if(!a)return(0,r.warn)("generateImages: OffscreenCanvas is not supported, cannot save or print some annotations with images."),null;let n;for(const{bitmapId:a,bitmap:r}of e)r&&(n||=new Map,n.set(a,StampAnnotation.createImage(r,t)));return n}static async saveNewAnnotations(e,t,a,n){const i=e.xref;let o;const c=[],l=[],{isOffscreenCanvasSupported:h}=e.options;for(const u of a)if(!u.deleted)switch(u.annotationType){case r.AnnotationEditorType.FREETEXT:if(!o){const e=new s.Dict(i);e.set("BaseFont",s.Name.get("Helvetica")),e.set("Type",s.Name.get("Font")),e.set("Subtype",s.Name.get("Type1")),e.set("Encoding",s.Name.get("WinAnsiEncoding"));const t=[];o=i.getNewTemporaryRef(),await(0,m.writeObject)(o,e,t,i),c.push({ref:o,data:t.join("")})}l.push(FreeTextAnnotation.createNewAnnotation(i,u,c,{evaluator:e,task:t,baseFontRef:o}));break;case r.AnnotationEditorType.INK:l.push(InkAnnotation.createNewAnnotation(i,u,c));break;case r.AnnotationEditorType.STAMP:if(!h)break;const a=await n.get(u.bitmapId);if(a.imageStream){const{imageStream:e,smaskStream:t}=a,r=[];if(t){const a=i.getNewTemporaryRef();await(0,m.writeObject)(a,t,r,i),c.push({ref:a,data:r.join("")}),e.dict.set("SMask",a),r.length=0}const n=a.imageRef=i.getNewTemporaryRef();await(0,m.writeObject)(n,e,r,i),c.push({ref:n,data:r.join("")}),a.imageStream=a.smaskStream=null}l.push(StampAnnotation.createNewAnnotation(i,u,c,{image:a}))}return{annotations:await Promise.all(l),dependencies:c}}static async printNewAnnotations(e,t,a,n,i){if(!n)return null;const{options:s,xref:o}=t,c=[];for(const l of n)if(!l.deleted)switch(l.annotationType){case r.AnnotationEditorType.FREETEXT:c.push(FreeTextAnnotation.createNewPrintAnnotation(e,o,l,{evaluator:t,task:a,evaluatorOptions:s}));break;case r.AnnotationEditorType.INK:c.push(InkAnnotation.createNewPrintAnnotation(e,o,l,{evaluatorOptions:s}));break;case r.AnnotationEditorType.STAMP:if(!s.isOffscreenCanvasSupported)break;const n=await i.get(l.bitmapId);if(n.imageStream){const{imageStream:e,smaskStream:t}=n;t&&e.dict.set("SMask",t),n.imageRef=new f.JpegStream(e,e.length),n.imageStream=n.smaskStream=null}c.push(StampAnnotation.createNewPrintAnnotation(e,o,l,{image:n,evaluatorOptions:s}))}return Promise.all(c)}};class Annotation{constructor(e){const{dict:t,xref:a,annotationGlobals:i}=e;this.setTitle(t.get("T")),this.setContents(t.get("Contents")),this.setModificationDate(t.get("M")),this.setFlags(t.get("F")),this.setRectangle(t.getArray("Rect")),this.setColor(t.getArray("C")),this.setBorderStyle(t),this.setAppearance(t),this.setOptionalContent(t);const o=t.get("MK");this.setBorderAndBackgroundColors(o),this.setRotation(o,t),this.ref=e.ref instanceof s.Ref?e.ref:null,this._streams=[],this.appearance&&this._streams.push(this.appearance);const c=!!(this.flags&r.AnnotationFlag.LOCKED),l=!!(this.flags&r.AnnotationFlag.LOCKEDCONTENTS);if(i.structTreeRoot){let a=t.get("StructParent");a=Number.isInteger(a)&&a>=0?a:-1,i.structTreeRoot.addAnnotationIdToPage(e.pageRef,a)}if(this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,backgroundColor:this.backgroundColor,borderColor:this.borderColor,rotation:this.rotation,contentsObj:this._contents,hasAppearance:!!this.appearance,id:e.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:e.subtype,hasOwnCanvas:!1,noRotate:!!(this.flags&r.AnnotationFlag.NOROTATE),noHTML:c&&l},e.collectFields){const i=t.get("Kids");if(Array.isArray(i)){const e=[];for(const t of i)t instanceof s.Ref&&e.push(t.toString());0!==e.length&&(this.data.kidIds=e)}this.data.actions=(0,n.collectActions)(a,t,r.AnnotationActionEventType),this.data.fieldName=this._constructFieldName(t),this.data.pageIndex=e.pageIndex}this._isOffscreenCanvasSupported=e.evaluatorOptions.isOffscreenCanvasSupported,this._fallbackFontDict=null,this._needAppearances=!1}_hasFlag(e,t){return!!(e&t)}_isViewable(e){return!this._hasFlag(e,r.AnnotationFlag.INVISIBLE)&&!this._hasFlag(e,r.AnnotationFlag.NOVIEW)}_isPrintable(e){return this._hasFlag(e,r.AnnotationFlag.PRINT)&&!this._hasFlag(e,r.AnnotationFlag.HIDDEN)&&!this._hasFlag(e,r.AnnotationFlag.INVISIBLE)}mustBeViewed(e,t){const a=e?.get(this.data.id)?.noView;return void 0!==a?!a:this.viewable&&!this._hasFlag(this.flags,r.AnnotationFlag.HIDDEN)}mustBePrinted(e){const t=e?.get(this.data.id)?.noPrint;return void 0!==t?!t:this.printable}get viewable(){return null!==this.data.quadPoints&&(0===this.flags||this._isViewable(this.flags))}get printable(){return null!==this.data.quadPoints&&(0!==this.flags&&this._isPrintable(this.flags))}_parseStringHelper(e){const t="string"==typeof e?(0,r.stringToPDFString)(e):"";return{str:t,dir:t&&"rtl"===(0,l.bidi)(t).dir?"rtl":"ltr"}}setDefaultAppearance(e){const{dict:t,annotationGlobals:a}=e,r=(0,n.getInheritableProperty)({dict:t,key:"DA"})||a.acroForm.get("DA");this._defaultAppearance="string"==typeof r?r:"",this.data.defaultAppearanceData=(0,i.parseDefaultAppearance)(this._defaultAppearance)}setTitle(e){this._title=this._parseStringHelper(e)}setContents(e){this._contents=this._parseStringHelper(e)}setModificationDate(e){this.modificationDate="string"==typeof e?e:null}setFlags(e){this.flags=Number.isInteger(e)&&e>0?e:0}hasFlag(e){return this._hasFlag(this.flags,e)}setRectangle(e){this.rectangle=Array.isArray(e)&&4===e.length?r.Util.normalizeRect(e):[0,0,0,0]}setColor(e){this.color=getRgbColor(e)}setLineEndings(e){if(this.lineEndings=["None","None"],Array.isArray(e)&&2===e.length)for(let t=0;t<2;t++){const a=e[t];if(a instanceof s.Name)switch(a.name){case"None":continue;case"Square":case"Circle":case"Diamond":case"OpenArrow":case"ClosedArrow":case"Butt":case"ROpenArrow":case"RClosedArrow":case"Slash":this.lineEndings[t]=a.name;continue}(0,r.warn)(`Ignoring invalid lineEnding: ${a}`)}}setRotation(e,t){this.rotation=0;let a=e instanceof s.Dict?e.get("R")||0:t.get("Rotate")||0;Number.isInteger(a)&&0!==a&&(a%=360,a<0&&(a+=360),a%90==0&&(this.rotation=a))}setBorderAndBackgroundColors(e){e instanceof s.Dict?(this.borderColor=getRgbColor(e.getArray("BC"),null),this.backgroundColor=getRgbColor(e.getArray("BG"),null)):this.borderColor=this.backgroundColor=null}setBorderStyle(e){if(this.borderStyle=new AnnotationBorderStyle,e instanceof s.Dict)if(e.has("BS")){const t=e.get("BS"),a=t.get("Type");a&&!(0,s.isName)(a,"Border")||(this.borderStyle.setWidth(t.get("W"),this.rectangle),this.borderStyle.setStyle(t.get("S")),this.borderStyle.setDashArray(t.getArray("D")))}else if(e.has("Border")){const t=e.getArray("Border");Array.isArray(t)&&t.length>=3&&(this.borderStyle.setHorizontalCornerRadius(t[0]),this.borderStyle.setVerticalCornerRadius(t[1]),this.borderStyle.setWidth(t[2],this.rectangle),4===t.length&&this.borderStyle.setDashArray(t[3],!0))}else this.borderStyle.setWidth(0)}setAppearance(e){this.appearance=null;const t=e.get("AP");if(!(t instanceof s.Dict))return;const a=t.get("N");if(a instanceof c.BaseStream)return void(this.appearance=a);if(!(a instanceof s.Dict))return;const r=e.get("AS");if(!(r instanceof s.Name&&a.has(r.name)))return;const n=a.get(r.name);n instanceof c.BaseStream&&(this.appearance=n)}setOptionalContent(e){this.oc=null;const t=e.get("OC");t instanceof s.Name?(0,r.warn)("setOptionalContent: Support for /Name-entry is not implemented."):t instanceof s.Dict&&(this.oc=t)}loadResources(e,t){return t.dict.getAsync("Resources").then((t=>{if(!t)return;return new g.ObjectLoader(t,e,t.xref).load().then((function(){return t}))}))}async getOperatorList(e,t,a,n,i){const c=this.data;let l=this.appearance;const h=!!(this.data.hasOwnCanvas&&a&r.RenderingIntentFlag.DISPLAY);if(!l){if(!h)return{opList:new p.OperatorList,separateForm:!1,separateCanvas:!1};l=new o.StringStream(""),l.dict=new s.Dict}const u=l.dict,d=await this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"],l),f=u.getArray("BBox")||[0,0,1,1],g=u.getArray("Matrix")||[1,0,0,1,0,0],m=getTransformMatrix(c.rect,f,g),b=new p.OperatorList;let y;return this.oc&&(y=await e.parseMarkedContentProps(this.oc,null)),void 0!==y&&b.addOp(r.OPS.beginMarkedContentProps,["OC",y]),b.addOp(r.OPS.beginAnnotation,[c.id,c.rect,m,g,h]),await e.getOperatorList({stream:l,task:t,resources:d,operatorList:b,fallbackFontDict:this._fallbackFontDict}),b.addOp(r.OPS.endAnnotation,[]),void 0!==y&&